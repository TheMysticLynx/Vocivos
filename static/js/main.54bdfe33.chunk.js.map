{"version":3,"sources":["Api/index.ts","store/index.ts","Api/types.ts","components/SkeletonLoaders.tsx","components/NavBar.tsx","components/SignIn.tsx","components/Markets/Buy.tsx","components/Automation/Models.ts","components/Markets/Sell.tsx","components/Ships/Travel.tsx","components/Ships/TravelProgress.tsx","components/Automation/StepButton.tsx","components/Automation/AutomateModal.tsx","components/Ships/ShipCard.tsx","components/Profile.tsx","components/Ships/PurchaseShipModal.tsx","components/Ships/Available.tsx","components/Ships/Owned.tsx","components/Ships/Ships.tsx","components/Systems/SystemInfo.tsx","components/Systems/ThreeObjects/Asteroid.tsx","components/Systems/ThreeObjects/Moon.tsx","components/Systems/ThreeObjects/Planet.tsx","components/Systems/ThreeObjects/Sun.tsx","components/Systems/Systems.tsx","components/Loans/GetLoadModal.tsx","components/Loans/Available.tsx","components/Loans/Owned.tsx","components/Loans/Loans.tsx","components/Markets/Markets.tsx","App.tsx","index.tsx","webworker.ts"],"names":["fetchMethod","initialState","user","credits","loans","ships","username","undefined","account","token","flightPlans","marketData","automations","spacetraders","createSlice","name","reducers","reset","state","Object","assign","setUser","payload","setToken","setCredits","updateShip","find","x","id","addFlightPlan","push","ship","location","localStorage","setItem","JSON","stringify","removeFlightPlan","findIndex","splice","destination","updateMarketData","some","item","planet","symbol","map","addAutomation","shipId","setAutomationState","enabled","addAutomationError","error","actions","reducer","store","configureStore","preloadedState","BASE_URL","authFetch","url","type","a","Get","fetch","method","headers","Authorization","response","body","status","Error","json","result","message","LoanType","LocationType","CargoType","Post","className","class","good","quantity","planId","ModalPlaceholder","speed","width","height","viewBox","backgroundColor","foregroundColor","y","rx","ry","CardLoader","HeaderLoader","ProfileLoader","AutoStepLoader","NavBar","useSelector","useState","dropDownOpen","setDropDownOpen","ref","useRef","dispatch","useDispatch","useEffect","pageEvent","e","current","contains","target","window","addEventListener","removeEventListener","onClick","xmlns","fill","aria-hidden","fillRule","d","clipRule","role","aria-orientation","aria-labelledby","removeItem","Fragment","to","toLocaleString","title","strokeWidth","stroke","strokeLinecap","strokeLinejoin","GetApiKey","userName","setUserName","userToken","setUserToken","formValid","setFormValid","signIn","setSignIn","setError","disabled","setDisabled","getApiKey","preventDefault","Api","Login","validate","valid","document","querySelector","checkValidity","placeholder","onChange","value","required","AutoAction","Buy","handleClose","show","setMarketData","selectedMarket","setSelectedMarket","purchaseQuantity","setPurchaseQuantity","working","setWorking","showHideModal","data","marketplace","sort","b","getMarket","maxQuantity","maxCargo","Math","floor","spaceAvailable","volumePerUnit","pricePerUnit","quantityAvailable","purchaseMarket","market","toLowerCase","split","s","charAt","toUpperCase","slice","join","min","parseInt","Sell","sellQuantity","setSellQuantity","sellMarket","cargo","totalVolume","max","Travel","locations","setLocations","loc","getLocations","createFlightPlan","flightPlan","updatedShip","TravelProgressBar","props","completed","style","transition","StepButton","step","index","length","system","editStep","deleteStep","moveStepUp","moveStepDown","editSubAction","action","Number","isNaN","formatString","Chemicals","editAction","values","getSubAction","AutomateModal","steps","autoSteps","setAutoSteps","setSystem","makeId","i","random","updated","filter","tempArray","element","newStep","addNewStep","ShipCard","time","compact","automation","showBuyModal","setBuyModalShow","showSellModal","setSellModalShow","showTravelModal","setTravelModalShow","showAutomateModal","setAutomateModalShow","remainingTime","setRemainingTime","isPast","Date","arrivesAt","formatDistanceToNowStrict","fuelIsEmpty","Fuel","reduce","acc","calcProgress","now","getUnixTime","timeRemainingInSeconds","isFuture","TravelProgress","manufacturer","enableBackground","weapons","plating","defaultProps","Profile","setTime","interval","setInterval","clearInterval","loan","repaymentAmount","formatDistanceToNow","due","addSuffix","PurchaseShipModal","history","useHistory","loading","setLoading","purchaseShip","renderButtons","price","purchaseLocations","Available","setShips","sortOrder","setOrder","sortType","setSortType","showModal","setModalShow","selectedShip","setSelectedShip","GetShips","getShips","lowestPrice","prev","curr","sorted","transform","version","Owned","sortedShips","Ships","exact","activeClassName","path","component","SystemInfo","stars","planets","moons","asteroids","star","moon","parent","asteroid","Sphere","mesh","imageTexture","useLoader","TextureLoader","process","setHover","active","setActive","scale","event","onPointerOver","onPointerOut","args","attach","useFrame","rotation","rotateSpeed","setrotateSpeed","direction","intensity","position","emissiveMap","emissive","Color","emissiveIntensity","SystemMap","bgImageTexture","setStars","setPlanets","setAsteroids","setMoons","systems","Planet","GasGiant","Asteroid","GetSystems","tempMoons","Moon","moonArray","startsWith","getMoonPosition","temp","camera","fov","onCreated","scene","background","lookAt","fallback","Sun","GetLoan","requestLoan","Startup","amount","termInDays","rate","setLoans","selectedLoan","setSelectedLoan","GetLoans","collateralRequired","Loans","Markets","getData","forEach","updatedAt","getMarketData","getDataForLocation","getUpdatedTime","App","Worker","automationsList","setAutomationsList","key","getItem","apiKey","parse","FetchAccount","flightPlansStore","plan","terminatedAt","marketDataStore","webworkerError","console","log","webworkerUpdateState","webworkerGetLocalStorage","worker","webworkerUpdateMarketData","Comlink","instance","run","stop","SignIn","Systems","ReactDOM","render","StrictMode","basename","getElementById"],"mappings":"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","file":"static/js/main.54bdfe33.chunk.js","sourcesContent":["import {\n   Status, Account, User, ShipsAvailable, Systems, Loans, Market, Purchase, Locations, FlightPlanRes, ShipInfo,\n} from './types';\n\n// IMPORTANT: camelCase used because: https://github.com/pmmmwh/react-refresh-webpack-plugin/blob/main/docs/TROUBLESHOOTING.md#usage-with-indirection-like-workers-and-js-templates\n// webworkers that reference this Api file will throw an error if PascalCase is used.\nenum fetchMethod {\n   Get = 'get',\n   Post = 'post',\n}\n\nconst BASE_URL = 'https://api.spacetraders.io';\n\nasync function authFetch<T>(\n   url: string, token: string, type: fetchMethod, payload: Record<string, any> = {},\n): Promise<T> {\n   let response;\n\n   if (type === fetchMethod.Get) {\n      response = await fetch(url, {\n         method: type,\n         headers: {\n            Authorization: `Bearer ${token}`,\n         },\n      });\n   } else {\n      response = await fetch(url, {\n         method: type,\n         headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json',\n         },\n         body: JSON.stringify(payload),\n      });\n   }\n\n   if (response.status === 401) {\n      throw new Error('Invalid username or token.');\n   }\n\n   const result = await response.json();\n\n   if (response.status >= 400) {\n      throw new Error(result.error.message);\n   }\n\n   return result;\n}\n\nexport default {\n   async getStatus() {\n      const response = await fetch(`${BASE_URL}/game/status`);\n      const result = await response.json() as Status;\n\n      return result;\n   },\n\n   async getToken(username: string) {\n      const response = await fetch(`${BASE_URL}/users/${username}/token`, { method: fetchMethod.Post });\n\n      if (response.status >= 400) {\n         throw new Error('Username already exists');\n      }\n\n      const result = await response.json() as Account;\n\n      return result;\n   },\n\n   async getUser(username: string, token: string) {\n      const url = `${BASE_URL}/users/${username}`;\n      return authFetch<User>(url, token, fetchMethod.Get);\n   },\n\n   async getLoansAvailable(token: string) {\n      const url = `${BASE_URL}/game/loans`;\n      return authFetch<Loans>(url, token, fetchMethod.Get);\n   },\n\n   async getLoansOwned(username: string, token: string) {\n      const url = `${BASE_URL}/users/${username}/loans`;\n      return authFetch<Loans>(url, token, fetchMethod.Get);\n   },\n\n   async newLoan(username: string, token: string, type: string) {\n      const url = `${BASE_URL}/users/${username}/loans`;\n      return authFetch<User>(url, token, fetchMethod.Post, { type });\n   },\n\n   async availableShips(token: string, className = '') {\n      const url = `${BASE_URL}/game/ships`;\n      return authFetch<ShipsAvailable>(url, token, fetchMethod.Get, { class: className });\n   },\n\n   async ownedShips(token: string, username: string) {\n      const url = `${BASE_URL}/users/${username}/ships`;\n      return authFetch<ShipsAvailable>(url, token, fetchMethod.Get);\n   },\n\n   async buyShip(token: string, username: string, location: string, type: string) {\n      const url = `${BASE_URL}/users/${username}/ships`;\n      return authFetch<User>(url, token, fetchMethod.Post, { location, type });\n   },\n\n   async shipInfo(token: string, username: string, shipId: string) {\n      const url = `${BASE_URL}/users/${username}/ships/${shipId}`;\n      return authFetch<ShipInfo>(url, token, fetchMethod.Get);\n   },\n\n   async systemsInfo(token: string) {\n      const url = `${BASE_URL}/game/systems`;\n      return authFetch<Systems>(url, token, fetchMethod.Get);\n   },\n\n   async getLocations(token: string, location: string) {\n      const url = `${BASE_URL}/game/systems/${location}/locations`;\n      return authFetch<Locations>(url, token, fetchMethod.Get);\n   },\n\n   async getMarket(token: string, symbol: string) {\n      const url = `${BASE_URL}/game/locations/${symbol}/marketplace`;\n      return authFetch<Market>(url, token, fetchMethod.Get);\n   },\n\n   async purchaseOrder(token: string, username: string, shipId: string, good: string, quantity: number) {\n      const url = `${BASE_URL}/users/${username}/purchase-orders`;\n      return authFetch<Purchase>(url, token, fetchMethod.Post, { shipId, good, quantity });\n   },\n\n   async sellOrder(token: string, username: string, shipId: string, good: string, quantity: number) {\n      const url = `${BASE_URL}/users/${username}/sell-orders`;\n      return authFetch<Purchase>(url, token, fetchMethod.Post, { shipId, good, quantity });\n   },\n\n   async createFlightPlan(token: string, username: string, shipId: string, destination: string) {\n      const url = `${BASE_URL}/users/${username}/flight-plans`;\n      return authFetch<FlightPlanRes>(url, token, fetchMethod.Post, { shipId, destination });\n   },\n\n   async queryFlightPlan(token: string, username: string, planId: string) {\n      const url = `${BASE_URL}/users/${username}/flight-plans/${planId}`;\n      return authFetch<FlightPlanRes>(url, token, fetchMethod.Get);\n   },\n};\n","import { configureStore, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport {\n   FlightPlan, Planet, OwnedLoan, OwnedShip, User,\n} from '../Api/types';\nimport { WorkerError } from '../App';\nimport { Steps } from '../components/Automation/Models';\n\nexport interface StoredMarket {\n   updatedAt: number,\n   planet: Planet,\n}\n\ninterface InitialState {\n   user: {\n      credits: number,\n      loans: OwnedLoan[],\n      ships: OwnedShip[],\n      username: string | undefined\n   },\n   account: {\n      token: string,\n      username: string\n   },\n   flightPlans: FlightPlan[],\n   marketData: StoredMarket[],\n   automations: Steps[],\n}\n\nconst initialState: InitialState = {\n   user: {\n      credits: 0,\n      loans: [],\n      ships: [],\n      username: undefined,\n   },\n   account: {\n      token: '',\n      username: '',\n   },\n   flightPlans: [],\n   marketData: [],\n   automations: [],\n};\n\nconst spacetraders = createSlice({\n   name: 'spacetraders',\n   initialState,\n   reducers: {\n      reset: (state) => {\n         Object.assign(state, initialState);\n      },\n      setUser: (state, { payload }:PayloadAction<User>) => {\n         state.user = payload.user;\n      },\n      setToken: (state, { payload }:PayloadAction<{ username:string, token:string }>) => {\n         state.account = payload;\n      },\n      setCredits: (state, { payload }:PayloadAction<number>) => {\n         state.user.credits = payload;\n      },\n      updateShip: (state, { payload }:PayloadAction<OwnedShip>) => {\n         Object.assign(state.user.ships.find((x) => x.id === payload.id), payload);\n      },\n      addFlightPlan: (state, { payload }:PayloadAction<FlightPlan>) => {\n         state.flightPlans.push(payload);\n         // when in transit, ship location is 'undefined'\n         const ship = state.user.ships.find((x) => x.id === payload.ship);\n         if (ship) {\n            ship.location = undefined;\n         }\n\n         localStorage.setItem('flightPlans', JSON.stringify(state.flightPlans));\n      },\n      removeFlightPlan: (state, { payload }:PayloadAction<FlightPlan>) => {\n         if (state.flightPlans.findIndex((x) => x.id === payload.id) > -1) {\n            state.flightPlans.splice(state.flightPlans.findIndex((x) => x.id === payload.id), 1);\n\n            // update ship with new location\n            const ship = state.user.ships.find((x) => x.id === payload.ship);\n            if (ship) {\n               ship.location = payload.destination;\n            }\n            localStorage.setItem('flightPlans', JSON.stringify(state.flightPlans));\n         }\n      },\n      updateMarketData: (state, { payload }:PayloadAction<StoredMarket>) => {\n         // check state for existing market object\n         if (state.marketData.some((item) => (item.planet.symbol === payload.planet.symbol))) {\n            state.marketData = state.marketData.map((item) => ((item.planet.symbol === payload.planet.symbol) ? payload : item));\n         } else {\n            state.marketData.push(payload);\n         }\n         localStorage.setItem('marketData', JSON.stringify(state.marketData));\n      },\n      addAutomation: (state, { payload }:PayloadAction<Steps>) => {\n         // check for existing automation for given ship and replace if it exists\n         if (state.automations.findIndex((x) => x.shipId === payload.shipId) !== -1) {\n            state.automations.splice(state.automations.findIndex((x) => x.shipId === payload.shipId), 1);\n         }\n\n         state.automations.push(payload);\n      },\n      setAutomationState: (state, { payload }:PayloadAction<{ shipId: string, enabled: boolean}>) => {\n         const ship = state.automations.find((x) => x.shipId === payload.shipId);\n         if (ship) {\n            ship.enabled = payload.enabled;\n         }\n      },\n      addAutomationError: (state, { payload }:PayloadAction<WorkerError>) => {\n         const ship = state.automations.find((x) => x.shipId === payload.shipId);\n         if (ship) {\n            ship.error = payload.error;\n         }\n      },\n   },\n});\n\nexport const {\n   setUser, setToken, setCredits, updateShip, addFlightPlan, removeFlightPlan, updateMarketData, addAutomation, setAutomationState, addAutomationError, reset,\n} = spacetraders.actions;\n\nconst { reducer } = spacetraders;\n\n// STORE\n\nconst store = configureStore({\n   reducer,\n   preloadedState: undefined,\n});\n\nexport type RootState = ReturnType<typeof store.getState>;\n\nexport default store;\n","export enum LoanType {\n   Startup = 'STARTUP',\n}\n\nexport enum LocationType {\n   Planet = 'PLANET',\n   Moon = 'MOON',\n   GasGiant = 'GAS_GIANT',\n   Asteroid = 'ASTEROID',\n}\n\nexport enum CargoType {\n   Chemicals = 'CHEMICALS',\n   Construction = 'CONSTRUCTION_MATERIALS',\n   Consumer = 'CONSUMER_GOODS',\n   Electronics = 'ELECTRONICS',\n   Food = 'FOOD',\n   Fuel = 'FUEL',\n   Machinery = 'MACHINERY',\n   Metals = 'METALS',\n   Research = 'RESEARCH',\n   ShipParts = 'SHIP_PARTS',\n   ShipPlating = 'SHIP_PLATING',\n   Textiles = 'TEXTILES',\n   Workers = 'WORKERS',\n}\n\nexport interface Status {\n   status: string;\n}\n\nexport interface Account {\n   token: string,\n   user: {\n      createdAt: string,\n      credits: number,\n      id: string,\n      email: string,\n      picture: string,\n      updatedAt: string,\n      username: string,\n   }\n}\n\nexport interface Loans {\n   loans: Loan[],\n}\n\nexport interface Loan {\n   type: string,\n   amount: number,\n   collateralRequired: boolean,\n   rate: number,\n   termInDays: number,\n}\n\nexport interface OwnedLoan {\n   due: Date,\n   id: string,\n   repaymentAmount: number,\n   status: number,\n   type: LoanType,\n}\n\nexport interface ShipsAvailable {\n   ships: Ship[],\n}\n\nexport interface ShipInfo {\n   ship: OwnedShip,\n}\n\nexport interface Ship {\n   class: string,\n   manufacturer: string,\n   maxCargo: number,\n   plating: number,\n   purchaseLocations: PurchaseLocation[],\n   speed: number,\n   type: string,\n   weapons: number,\n}\n\nexport interface OwnedShip {\n   cargo: Cargo[],\n   class: string,\n   id: string,\n   location: string | undefined,\n   manufacturer: string,\n   maxCargo: number,\n   plating: number,\n   spaceAvailable: number,\n   speed: number,\n   type: string,\n   weapons: number,\n   x: number,\n   y: number,\n}\n\nexport interface Cargo {\n   good: CargoType,\n   quantity: number,\n   totalVolume: number,\n}\n\nexport interface PurchaseLocation {\n   location: string,\n   price: number,\n}\n\nexport interface User {\n   user: {\n      credits: number,\n      loans: OwnedLoan[],\n      ships: OwnedShip[],\n      username: string,\n   }\n}\n\nexport interface Location {\n   symbol: string,\n   type: LocationType,\n   name: string,\n   x: number,\n   y: number,\n}\n\nexport interface Locations {\n   locations: Location[],\n}\n\nexport interface System {\n   symbol: string,\n   name: string,\n   locations: Location[],\n}\n\nexport interface Systems {\n   systems: System[],\n}\n\nexport interface Market {\n   location: Planet,\n}\n\nexport interface Marketplace {\n   symbol: string,\n   volumePerUnit: number,\n   pricePerUnit: number,\n   quantityAvailable: number,\n}\n\nexport interface Planet {\n   marketplace: Marketplace[],\n   name: string,\n   symbol: string,\n   type: string,\n   x: number,\n   y: number,\n}\n\nexport interface Purchase {\n   credits: number,\n   order: Order,\n   ship: OwnedShip,\n}\n\nexport interface Order {\n   good: string,\n   pricePerUnit: number,\n   quantity: number,\n   total: number,\n}\n\nexport interface FlightPlanRes {\n   flightPlan: FlightPlan,\n}\n\nexport interface FlightPlan {\n   arrivesAt: Date,\n   departure: string,\n   destination: string,\n   distance: number,\n   fuelConsumed: number,\n   fuelRemaining: number,\n   id: string,\n   ship: string,\n   terminatedAt: Date | null,\n   timeRemainingInSeconds: number,\n}\n","import React from 'react';\nimport ContentLoader from 'react-content-loader';\n\nexport const ModalPlaceholder = () => (\n   <ContentLoader\n      speed={2}\n      width={400}\n      height={60}\n      viewBox=\"0 0 400 60\"\n      backgroundColor=\"#D1D5DB\"\n      foregroundColor=\"#ecebeb\"\n   >\n      <rect x=\"0\" y=\"0\" rx=\"0\" ry=\"0\" width=\"400\" height=\"44\" />\n   </ContentLoader>\n);\n\nexport const CardLoader = () => (\n   <ContentLoader\n      speed={2}\n      width={400}\n      height={60}\n      viewBox=\"0 0 400 60\"\n      backgroundColor=\"#374151\"\n      foregroundColor=\"#4B5563\"\n   >\n      <rect x=\"0\" y=\"0\" rx=\"10\" ry=\"10\" width=\"200\" height=\"20\" />\n      <rect x=\"0\" y=\"45\" rx=\"5\" ry=\"5\" width=\"100\" height=\"10\" />\n   </ContentLoader>\n);\n\nexport const HeaderLoader = () => (\n   <ContentLoader\n      speed={2}\n      width={200}\n      height={20}\n      viewBox=\"0 0 200 20\"\n      backgroundColor=\"#374151\"\n      foregroundColor=\"#4B5563\"\n   >\n      <rect x=\"0\" y=\"0\" rx=\"10\" ry=\"10\" width=\"200\" height=\"20\" />\n   </ContentLoader>\n);\n\nexport const ProfileLoader = () => (\n   <ContentLoader\n      speed={2}\n      width={300}\n      height={200}\n      viewBox=\"0 0 300 200\"\n      backgroundColor=\"#374151\"\n      foregroundColor=\"#4B5563\"\n   >\n      <rect x=\"0\" y=\"0\" rx=\"10\" ry=\"10\" width=\"100\" height=\"20\" />\n      <rect x=\"0\" y=\"30\" rx=\"15\" ry=\"15\" width=\"250\" height=\"30\" />\n   </ContentLoader>\n);\n\nexport const AutoStepLoader = () => (\n   <ContentLoader\n      speed={2}\n      width={398}\n      height={100}\n      viewBox=\"0 0 398 100\"\n      backgroundColor=\"#D1D5DB\"\n      foregroundColor=\"#E5E7EB\"\n   >\n      <rect x=\"0\" y=\"0\" rx=\"5\" ry=\"5\" width=\"398\" height=\"48\" />\n      <rect x=\"0\" y=\"50\" rx=\"5\" ry=\"5\" width=\"398\" height=\"48\" />\n   </ContentLoader>\n);\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { reset, RootState } from '../store';\nimport { HeaderLoader } from './SkeletonLoaders';\n\nconst NavBar = () => {\n   const user = useSelector((state:RootState) => state.user);\n   const { token } = useSelector((state:RootState) => state.account);\n   const [dropDownOpen, setDropDownOpen] = useState(false);\n   const ref = useRef<HTMLDivElement>(null);\n   const dispatch = useDispatch();\n\n   useEffect(() => {\n      // All to close the user dropdown on page click\n      const pageEvent = (e:MouseEvent) => {\n         if (ref.current !== null && !ref.current.contains(e.target as Node)) {\n            setDropDownOpen(false);\n         }\n      };\n\n      if (dropDownOpen) {\n         window.addEventListener('mousedown', pageEvent);\n      }\n\n      return () => {\n         window.removeEventListener('mousedown', pageEvent);\n      };\n   }, [dropDownOpen]);\n\n   const logout = () => {\n      dispatch(reset());\n      localStorage.removeItem('apiKey');\n      localStorage.removeItem('flightPlans');\n      // note, not removing market data from localStorage\n   };\n\n   return (\n      <div className=\"px-8 text-gray-50 w-full min-h-16 bg-gray-900 flex justify-between items-center\">\n         <div className=\"flex items-center\">\n            <div className=\"relative mr-1 pt-1\">\n               <button type=\"button\" className=\"text-gray-50 hover:text-gray-300\" onClick={() => setDropDownOpen(true)}>\n                  <svg className=\"mt-1 h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                     <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                  </svg>\n               </button>\n               { dropDownOpen\n               && (\n                  <div ref={ref} className=\"origin-top-left absolute left-0 mt-2 w-72 rounded-sm shadow-lg text-gray-700 bg-gray-200 ring-1 ring-black ring-opacity-5 focus:outline-none\" role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"options-menu\">\n                     <div className=\"py-1\" role=\"none\">\n                        <p className=\"text-gray-900 text-xs px-4 pt-2\">Token</p>\n                        <p className=\"text-xs px-4 pt-1\">{ token }</p>\n                        <button type=\"button\" className=\"block w-full text-left px-4 py-2 mt-2 text-sm hover:bg-gray-300 hover:text-gray-900\" role=\"menuitem\" onClick={logout}>\n                           Log out\n                        </button>\n                     </div>\n                  </div>\n               )}\n            </div>\n            {user.username === undefined\n               ? <HeaderLoader />\n               : (\n                  <React.Fragment>\n                     <h1><NavLink to=\"/\" className=\"hover:text-yellow-600\">{user.username}</NavLink></h1>\n                     <span className=\"text-xs text-gray-400 ml-4\">{ user.credits.toLocaleString() } credits</span>\n                  </React.Fragment>\n               )}\n         </div>\n         <div className=\"flex flex-row\">\n            <NavLink to=\"/ships\" title=\"ships\" className=\"w-7 h-7 mx-2 hover:text-yellow-600\">\n               <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" strokeWidth={1.3} viewBox=\"0 0 512.001 512.001\">\n                  <path d=\"m226 182.707h60v30h-60z\" />\n                  <path d=\"m482 340.339-95.167-73.476c-25.568-19.74-40.833-50.809-40.833-83.112v-46.044c0-28.454-8.007-56.148-23.156-80.091-14.729-23.279-35.535-42.055-60.168-54.298l-6.676-3.318-6.676 3.318c-24.632 12.243-45.438 31.019-60.168 54.298-15.148 23.943-23.156 51.637-23.156 80.091v46.044c0 32.303-15.265 63.372-40.833 83.112l-95.167 73.476v111.662h106v60h240v-60h106zm-226-306.578c32.849 18.929 54.461 51.693 59.067 88.946h-118.133c4.605-37.254 26.217-70.018 59.066-88.946zm-60 118.946h120v269.294h-120zm90 299.294v30h-60v-30zm-226-96.924 83.5-64.468c8.403-6.488 15.934-13.932 22.5-22.106v153.498h-106zm106 96.924h30v30h-30zm180 30h-30v-30h30zm106-60h-106v-153.498c6.565 8.174 14.096 15.618 22.499 22.106l83.501 64.468z\" />\n               </svg>\n            </NavLink>\n            <NavLink to=\"/loans\" title=\"loans\" className=\"w-7 h-7 mx-2 hover:text-yellow-600\">\n               <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.3} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n               </svg>\n            </NavLink>\n            <NavLink to=\"/markets\" title=\"Markets\" className=\"w-7 h-7 mx-2 hover:text-yellow-600\">\n               <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.3} d=\"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z\" />\n               </svg>\n            </NavLink>\n            <NavLink to=\"/systems\" title=\"locations\" className=\"w-7 h-7 mx-2 hover:text-yellow-600\">\n               <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.3} d=\"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7\" />\n               </svg>\n            </NavLink>\n         </div>\n      </div>\n   );\n};\n\nexport default NavBar;\n","import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport Api from '../Api';\nimport { setToken, setUser } from '../store';\n\nconst GetApiKey = () => {\n   const [userName, setUserName] = useState('');\n   const [userToken, setUserToken] = useState('');\n   const [formValid, setFormValid] = useState(false);\n   const [signIn, setSignIn] = useState(false);\n   const [error, setError] = useState('');\n   const dispatch = useDispatch();\n   const [disabled, setDisabled] = useState(false);\n\n   const getApiKey = async (e: React.FormEvent) => {\n      setDisabled(true);\n      e.preventDefault();\n      if (formValid) {\n         try {\n            const token = await Api.getToken(userName);\n            localStorage.setItem('apiKey', JSON.stringify({ username: token.user.username, token: token.token }));\n            dispatch(setToken({ username: token.user.username, token: token.token }));\n            const user = await Api.getUser(token.user.username, token.token);\n            dispatch(setUser(user));\n         } catch (err:unknown) {\n            setDisabled(false);\n            setError((err as Error).message);\n         }\n      }\n   };\n\n   const Login = async (e: React.FormEvent) => {\n      setDisabled(true);\n      e.preventDefault();\n      if (formValid) {\n         try {\n            // Validate the user/token\n            const user = await Api.getUser(userName, userToken);\n\n            localStorage.setItem('apiKey', JSON.stringify({ username: userName, token: userToken }));\n            dispatch(setToken({ username: userName, token: userToken }));\n            dispatch(setUser(user));\n         } catch (err:unknown) {\n            setDisabled(false);\n            setError((err as Error).message);\n         }\n      }\n   };\n\n   const validate = () => {\n      const valid = document.querySelector('form')?.checkValidity() as boolean;\n      setFormValid(valid);\n   };\n\n   return (\n      <div className=\"bg-gray-800 text-gray-200 w-full h-full flex flex-col items-center justify-center\">\n         <h1 className=\"text-4xl\">Welcome to Vocivos!</h1>\n         <h2 className=\"mb-6\">A SpaceTraders API interface</h2>\n         { error\n            && <p className=\"bg-red-300 text-red-800 px-4 py-3 mb-4\">{ error }</p>}\n         <div className=\"flex items-left flex-col\">\n            { signIn\n               ? (\n                  <div className=\"border border-gray-700 rounded p-7 px-10 shadow-lg bg-gray-900\">\n                     <form className=\"mt-2\">\n                        <div>\n                           <input type=\"text\" placeholder=\"Username\" className=\"text-gray-700 py-2 px-2 box-border border border-gray-400 rounded\" onChange={(e) => { setUserName(e.target.value); validate(); }} required />\n                        </div>\n                        <div className=\"mt-3\">\n                           <input type=\"text\" placeholder=\"Token\" className=\"text-gray-700 py-2 px-2 box-border border border-gray-400 rounded\" onChange={(e) => { setUserToken(e.target.value); validate(); }} />\n                        </div>\n                        <div className=\"mt-3\">\n                           <button type=\"submit\" className=\"py-2 px-4 w-full text-white bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-default disabled:bg-green-600\" disabled={disabled} onClick={Login}>Login</button>\n                        </div>\n                     </form>\n                     <p className=\"text-sm mt-4 text-center\">Need an account? <button type=\"button\" className=\"text-yellow-500 hover:text-yellow-400\" onClick={() => setSignIn(false)}>Register</button></p>\n                  </div>\n               )\n               : (\n                  <div className=\"border border-gray-700 rounded p-7 px-10 shadow-lg bg-gray-900\">\n                     <form className=\"mt-2\">\n                        <input type=\"text\" placeholder=\"Username\" className=\"text-gray-700 py-2 px-2 box-border border border-gray-400 rounded\" onChange={(e) => { setUserName(e.target.value); validate(); }} required />\n                        <div className=\"mt-3\">\n                           <button type=\"submit\" className=\"py-2 px-4 w-full text-white bg-green-600 rounded hover:bg-green-700 disabled:opacity-50 disabled:cursor-default disabled:bg-green-600\" disabled={disabled} onClick={getApiKey}>Sign Up</button>\n                        </div>\n                     </form>\n                     <p className=\"text-sm mt-4 text-center\">Already have an account? <button type=\"button\" className=\"text-yellow-500 hover:text-yellow-400\" onClick={() => setSignIn(true)}>Sign in</button></p>\n                  </div>\n               )}\n         </div>\n      </div>\n   );\n};\n\nexport default GetApiKey;\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Api from '../../Api';\nimport { Marketplace, OwnedShip } from '../../Api/types';\nimport { RootState, setCredits, updateShip } from '../../store';\nimport { ModalPlaceholder } from '../SkeletonLoaders';\n\ninterface Props {\n   handleClose: () => void,\n   show: boolean,\n   ship: OwnedShip\n}\n\nconst Buy = ({ handleClose, show, ship }:Props) => {\n   const { token, username } = useSelector((state:RootState) => state.account);\n   const { credits } = useSelector((state:RootState) => state.user);\n   const dispatch = useDispatch();\n   const [marketData, setMarketData] = useState<Marketplace[]>();\n   const [selectedMarket, setSelectedMarket] = useState<Marketplace>();\n   const [purchaseQuantity, setPurchaseQuantity] = useState<number>(0);\n   const [working, setWorking] = useState<boolean>(false);\n   const showHideModal = show ? 'fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900' : 'hidden';\n\n   useEffect(() => {\n      const getMarket = async () => {\n         if (!ship.location) { return; }\n         const data = (await Api.getMarket(token, ship.location)).location.marketplace;\n         // sort market data alphabetically by symbol\n         setMarketData([...data].sort(((a, b) => ((a.symbol > b.symbol) ? 1 : (b.symbol > a.symbol) ? -1 : 0))));\n      };\n      getMarket();\n   }, []);\n\n   // Symbols come from the API as all caps with underscore seperate. Format it to be more readable.\n   const formatString = (value:string) => (\n      value.toLowerCase().split('_').map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(' '));\n\n   const maxQuantity = (): number => {\n      if (!selectedMarket) { return 0; }\n\n      const maxCargo = Math.floor(ship.spaceAvailable / selectedMarket.volumePerUnit);\n\n      if (maxCargo * selectedMarket.pricePerUnit < credits && maxCargo <= selectedMarket.quantityAvailable) {\n         return maxCargo;\n      } if (maxCargo > selectedMarket.quantityAvailable) {\n         return selectedMarket.quantityAvailable;\n      }\n\n      return Math.floor(credits / selectedMarket.pricePerUnit);\n   };\n\n   const purchaseMarket = async () => {\n      if (!selectedMarket) { return; }\n      setWorking(true);\n      const result = await Api.purchaseOrder(token, username, ship.id, selectedMarket.symbol, purchaseQuantity);\n      dispatch(setCredits(result.credits));\n      dispatch(updateShip(result.ship));\n      setSelectedMarket(undefined);\n      handleClose();\n   };\n\n   return (\n      <div className={showHideModal}>\n         <div className=\"modal-overlay absolute w-full h-full bg-gray-900 opacity-50\" onClick={() => { setSelectedMarket(undefined); handleClose(); }} />\n         <div className=\"modal-container bg-gray-100 w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto min-h-1/3\">\n            <div className=\"modal-content py-4 text-left px-6\">\n               <h3 className=\"text-xl font-semibold mb-6\">Market Buy</h3>\n               <div className=\"relative\">\n                  {!marketData\n                     ? (\n                        <React.Fragment>\n                           <ModalPlaceholder />\n                           <ModalPlaceholder />\n                           <ModalPlaceholder />\n                        </React.Fragment>\n                     )\n                     : (\n                        <div className=\"divide-y\">\n                           {marketData?.map((market) => (\n                              <div className={`py-3 flex justify-between items-center bg-gray-100 w-full ${selectedMarket ? 'absolute' : ''} ${selectedMarket?.symbol === market.symbol ? 'z-10' : ''}`} key={market.symbol + market.quantityAvailable + market.pricePerUnit + market.volumePerUnit}>\n                                 <div>\n                                    <p className=\"font-semibold\">{ formatString(market.symbol) } <span className=\"ml-3 text-sm text-gray-500 font-normal\">{ market.quantityAvailable.toLocaleString() } units available</span></p>\n                                    <p className=\"text-sm\">{ market.pricePerUnit.toLocaleString() } credit{ market.pricePerUnit > 1 ? 's' : ''} per unit</p>\n                                 </div>\n                                 { !selectedMarket\n                                    && (\n                                       <div>\n                                          <button\n                                             type=\"button\"\n                                             className=\"text-sm bg-blue-500 text-white px-4 py-1 rounded mr-3 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-default disabled:bg-blue-500\"\n                                             onClick={() => setSelectedMarket(market)}\n                                             disabled={market.quantityAvailable <= 0}\n                                          >Buy\n                                          </button>\n                                       </div>\n                                    )}\n                              </div>\n                           ))}\n                        </div>\n                     )}\n                  { selectedMarket\n                        && (\n                           <div className=\"absolute top-20 w-full text-center\">\n                              <div className=\"flex\">\n                                 <input type=\"number\" min={0} value={purchaseQuantity} placeholder=\"Quantity\" className=\"flex-grow px-3 py-2 border border-gray-300 rounded focus:border-blue-500 focus:outline-none\" onChange={(e) => setPurchaseQuantity(parseInt(e.target.value, 10))} />\n                                 <button type=\"button\" className=\"ml-2 bg-blue-400 text-gray-100 px-3 py-2 rounded hover:bg-blue-500\" onClick={() => setPurchaseQuantity(maxQuantity)}>Max</button>\n                              </div>\n                              <button\n                                 type=\"button\"\n                                 className=\"mt-2 w-full px-3 py-2 bg-green-400 text-white rounded hover:bg-green-500 disabled:opacity-50 disabled:bg-green-400 disabled:cursor-default\"\n                                 disabled={(purchaseQuantity * selectedMarket.pricePerUnit <= 0) || ((purchaseQuantity * selectedMarket.pricePerUnit > credits) || (working))}\n                                 onClick={purchaseMarket}\n                              >\n                                 <span className={working ? 'hidden' : 'inline'}>Purchase for { (purchaseQuantity * selectedMarket.pricePerUnit).toLocaleString() } credit{ purchaseQuantity * selectedMarket.pricePerUnit > 1 ? 's' : ''}</span>\n                                 <span className={!working ? 'hidden' : 'inline'}>Please wait...</span>\n                              </button>\n                              <button type=\"button\" className=\"text-red-400 mt-3 hover:text-red-500\" onClick={() => { setSelectedMarket(undefined); setPurchaseQuantity(0); }}>Back</button>\n                           </div>\n                        )}\n               </div>\n            </div>\n         </div>\n      </div>\n   );\n};\n\nexport default Buy;\n","import { CargoType } from '../../Api/types';\n\nexport enum AutoAction {\n   Travel,\n   Buy,\n   Sell,\n}\n\nexport interface TravelStep {\n   action: AutoAction.Travel,\n   destination: string,\n}\n\nexport interface MarketStep {\n   action: AutoAction.Buy | AutoAction.Sell\n   good: CargoType,\n   quantity: number,\n}\n\nexport interface Step {\n   type: TravelStep | MarketStep,\n   id: string,\n}\n\nexport interface Steps {\n   enabled: boolean,\n   shipId: string,\n   steps: Step[],\n   error: string | null,\n}\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Api from '../../Api';\nimport { Cargo, Marketplace, OwnedShip } from '../../Api/types';\nimport { RootState, setCredits, updateShip } from '../../store';\nimport { ModalPlaceholder } from '../SkeletonLoaders';\n\ninterface Props {\n   handleClose: () => void,\n   show: boolean,\n   ship: OwnedShip\n}\n\nconst Sell = ({ handleClose, show, ship }:Props) => {\n   const { token, username } = useSelector((state:RootState) => state.account);\n   const dispatch = useDispatch();\n   const [marketData, setMarketData] = useState<Marketplace[]>();\n   const [selectedMarket, setSelectedMarket] = useState<Cargo>();\n   const [sellQuantity, setSellQuantity] = useState<number>(0);\n   const [working, setWorking] = useState<boolean>(false);\n   const showHideModal = show ? 'fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900' : 'hidden';\n\n   useEffect(() => {\n      const getMarket = async () => {\n         if (!ship.location) { return; }\n         const data = (await Api.getMarket(token, ship.location)).location.marketplace;\n         setMarketData(data);\n      };\n      getMarket();\n   }, []);\n\n   const sellMarket = async () => {\n      if (!selectedMarket) { return; }\n      setWorking(true);\n      const result = await Api.sellOrder(token, username, ship.id, selectedMarket.good, sellQuantity);\n      dispatch(setCredits(result.credits));\n      dispatch(updateShip(result.ship));\n      setSelectedMarket(undefined);\n      handleClose();\n   };\n\n   // Symbols come from the API as all caps with underscore seperate. Format it to be more readable.\n   const formatString = (value:string) => (\n      value.toLowerCase().split('_').map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(' '));\n\n   return (\n      <div className={showHideModal}>\n         <div className=\"modal-overlay absolute w-full h-full bg-gray-900 opacity-50\" onClick={() => { setSelectedMarket(undefined); handleClose(); }} />\n         <div className={`modal-container bg-gray-100 w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto ${selectedMarket ? 'min-h-1/3' : ''}`}>\n            <div className=\"modal-content py-4 text-left px-6\">\n               <h3 className=\"text-xl font-semibold mb-6\">Sell Cargo</h3>\n               <div className=\"relative\">\n                  {!marketData\n                     ? (\n                        <React.Fragment>\n                           <ModalPlaceholder />\n                           <ModalPlaceholder />\n                           <ModalPlaceholder />\n                        </React.Fragment>\n                     )\n                     : (\n                        <div className=\"divide-y\">\n                           {ship.cargo?.map((cargo) => (\n                              <div className={`py-3 flex justify-between items-center bg-gray-100 w-full ${selectedMarket ? 'absolute' : ''} ${selectedMarket?.good === cargo.good ? 'z-10' : ''}`} key={cargo.good + cargo.quantity + cargo.totalVolume}>\n                                 <div>\n                                    <p className=\"font-semibold\">{ formatString(cargo.good) } <span className=\"ml-3 text-sm text-gray-500 font-normal\">{ cargo.quantity.toLocaleString() } units available</span></p>\n                                    { marketData?.some((x) => x.symbol === cargo.good)\n                                       && <p className=\"text-sm\">{ marketData.find((x) => x.symbol === cargo.good)?.pricePerUnit.toLocaleString() } credits per unit</p>}\n                                 </div>\n                                 { !selectedMarket\n                                    && (\n                                       <div>\n                                          <button\n                                             type=\"button\"\n                                             className=\"text-sm bg-blue-500 text-white px-4 py-1 rounded mr-3 hover:bg-blue-600 disabled:opacity-50 disabled:cursor-default disabled:bg-blue-500\"\n                                             disabled={!marketData?.some((x) => x.symbol === cargo.good)}\n                                             onClick={() => setSelectedMarket(cargo)}\n                                          >Sell\n                                          </button>\n                                       </div>\n                                    )}\n                              </div>\n                           ))}\n                        </div>\n                     )}\n                  { selectedMarket\n                        && (\n                           <div className=\"absolute top-20 w-full text-center\">\n                              <div className=\"flex\">\n                                 <input type=\"number\" min={0} max={selectedMarket.quantity} value={sellQuantity} placeholder=\"Quantity\" className=\"flex-grow px-3 py-2 border border-gray-300 rounded focus:border-blue-500 focus:outline-none\" onChange={(e) => setSellQuantity(parseInt(e.target.value, 10))} />\n                                 <button type=\"button\" className=\"ml-2 bg-blue-400 text-gray-100 px-3 py-2 rounded hover:bg-blue-500\" onClick={() => setSellQuantity(selectedMarket.quantity)}>Max</button>\n                              </div>\n                              <button\n                                 type=\"button\"\n                                 className=\"mt-2 w-full px-3 py-2 bg-green-400 text-white rounded hover:bg-green-500 disabled:opacity-50 disabled:bg-green-400 disabled:cursor-default\"\n                                 disabled={(sellQuantity <= 0) || working}\n                                 onClick={sellMarket}\n                              >\n                                 <span className={working ? 'hidden' : 'inline'}>Sell for { (sellQuantity * (marketData?.find((x) => x.symbol === selectedMarket.good) as Marketplace).pricePerUnit).toLocaleString() } credits</span>\n                                 <span className={!working ? 'hidden' : 'inline'}>Please wait...</span>\n                              </button>\n                              <button type=\"button\" className=\"text-red-400 mt-3 hover:text-red-500\" onClick={() => { setSelectedMarket(undefined); setSellQuantity(0); }}>Back</button>\n                           </div>\n                        )}\n               </div>\n            </div>\n         </div>\n      </div>\n   );\n};\n\nexport default Sell;\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Api from '../../Api';\nimport { OwnedShip, Location } from '../../Api/types';\nimport { addFlightPlan, RootState, updateShip } from '../../store';\nimport { ModalPlaceholder } from '../SkeletonLoaders';\n\ninterface Props {\n   handleClose: () => void,\n   show: boolean,\n   ship: OwnedShip\n}\n\nconst Travel = ({ handleClose, show, ship }: Props) => {\n   const { token, username } = useSelector((state:RootState) => state.account);\n   const dispatch = useDispatch();\n   const [locations, setLocations] = useState<Location[]>();\n   const [error, setError] = useState<string>('');\n   const showHideModal = show ? 'fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900' : 'hidden';\n\n   useEffect(() => {\n      const getLocations = async () => {\n         if (!ship.location) { return; }\n         const loc = (await Api.getLocations(token, ship.location.split('-')[0])).locations;\n         setLocations(loc);\n      };\n      getLocations();\n   }, []);\n\n   const createFlightPlan = async (location: string) => {\n      try {\n         const result = (await Api.createFlightPlan(token, username, ship.id, location)).flightPlan;\n         dispatch(addFlightPlan(result));\n         handleClose();\n         // ship fuel and cargo space change after flight plan, so update the ship\n         const updatedShip = await Api.shipInfo(token, username, ship.id);\n         dispatch(updateShip(updatedShip.ship));\n      } catch (err: unknown) {\n         setError((err as Error).message);\n      }\n   };\n\n   return (\n      <div className={showHideModal}>\n         <div className=\"modal-overlay absolute w-full h-full bg-gray-900 opacity-50\" onClick={handleClose} />\n         <div className=\"modal-container bg-gray-100 w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto min-h-1/3\">\n            <div className=\"modal-content py-4 text-left px-6\">\n               <h3 className=\"text-xl font-semibold mb-6\">Set Destination</h3>\n               { error\n               && <p className=\"py-4 px-2 bg-red-500 text-gray-100 text-center\">{ error }</p>}\n               <div className=\"relative\">\n                  {!locations\n                     ? (\n                        <React.Fragment>\n                           <ModalPlaceholder />\n                           <ModalPlaceholder />\n                           <ModalPlaceholder />\n                        </React.Fragment>\n                     )\n                     : (\n                        <div className=\"divide-y\">\n                           {locations.map((location) => (\n                              <div className=\"py-2 flex justify-between items-center\" key={location.symbol + location.name}>\n                                 <div>\n                                    <p>{ location.name }</p>\n                                    <p className=\"text-sm text-gray-500\">{ location.symbol }</p>\n                                 </div>\n                                 <div>\n                                    { ship.location === location.symbol\n                                       ? <p className=\"text-sm text-gray-600 cursor-default\">Current location</p>\n                                       : (\n                                          <button\n                                             type=\"button\"\n                                             className=\"px-3 py-1 bg-blue-500 text-white rounded text-sm hover:bg-blue-600 disabled:opacity-50 disabled:cursor-default disabled:bg-blue-500\"\n                                             onClick={() => createFlightPlan(location.symbol)}\n                                          >Travel\n                                          </button>\n                                       )}\n                                 </div>\n                              </div>\n                           ))}\n                        </div>\n                     )}\n               </div>\n            </div>\n         </div>\n      </div>\n   );\n};\n\nexport default Travel;\n","import React from 'react';\n\ninterface Props {\n   completed: number,\n}\n\nconst TravelProgressBar = (props: Props) => {\n   const { completed } = props;\n\n   return (\n      <div className=\"h-0.5 w-full text-right bg-gray-600\">\n         <div className=\"h-full text-right bg-green-500\" style={{ width: `${completed}%`, transition: 'width 0.5s ease' }}>\n            <span />\n         </div>\n      </div>\n   );\n};\n\nexport default TravelProgressBar;\n","import React from 'react';\nimport { Location, CargoType } from '../../Api/types';\nimport {\n   AutoAction, MarketStep, Step, TravelStep,\n} from './Models';\n\ninterface Props {\n   step: Step,\n   index: number,\n   length: number,\n   system: Location[],\n   editStep: (value: Step) => void,\n   deleteStep: () => void,\n   moveStepUp: () => void,\n   moveStepDown: () => void,\n}\n\nconst StepButton = ({\n   step, index, length, system, editStep, deleteStep, moveStepUp, moveStepDown,\n}: Props) => {\n   const editAction = (value: string) => {\n      switch (value) {\n         case '0':\n            editStep({ ...step, type: { action: AutoAction.Travel, destination: system[0].symbol } });\n            break;\n         case '1':\n            editStep({ ...step, type: { action: AutoAction.Buy, good: CargoType.Chemicals, quantity: 0 } });\n            break;\n         case '2':\n            editStep({ ...step, type: { action: AutoAction.Sell, good: CargoType.Chemicals, quantity: 0 } });\n            break;\n         default:\n            null;\n      }\n   };\n\n   const editSubAction = (value: string) => {\n      // Need the action equality check for typescript\n      if (step.type.action !== AutoAction.Travel) {\n         if (Number.isNaN(parseInt(value, 10))) {\n            editStep({ ...step, type: { ...step.type, good: value as CargoType } });\n         } else {\n            editStep({ ...step, type: { ...step.type, quantity: parseInt(value, 10) } });\n         }\n      } else {\n         editStep({ ...step, type: { ...step.type, destination: value as string } });\n      }\n   };\n\n   const formatString = (value:string) => (\n      value.toLowerCase().split('_').map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(' '));\n\n   const travelComp = () => (\n      <React.Fragment>\n         <p className=\"text-sm\">to</p>\n         <select\n            name={`dest-${step.id}`}\n            id={`dest-${step.id}`}\n            className=\"text-sm ml-3 bg-gray-100 border-b border-yellow-500 appearance-none cursor-pointer\"\n            value={(step.type as TravelStep).destination}\n            onChange={(e) => editSubAction(e.target.value)}\n         >\n            {system.map((loc) => (\n               <option value={loc.symbol} key={`${step.id}-${loc.name}`}>{ loc.name } ({ loc.symbol })</option>\n            ))}\n         </select>\n      </React.Fragment>\n   );\n\n   const buyComp = () => (\n      <React.Fragment>\n         <select\n            name={`buy-${step.id}`}\n            id={`buy-${step.id}`}\n            className=\"text-sm ml-1 bg-gray-100 border-b border-yellow-500 appearance-none cursor-pointer\"\n            value={(step.type as MarketStep).good}\n            onChange={(e) => editSubAction(e.target.value)}\n         >\n            {Object.values(CargoType).map((type) => (\n               <option value={type} key={`${step.id}-buy-${type}`}>{ formatString(type) }</option>\n            ))}\n         </select>\n         <input\n            type=\"number\"\n            min={-1}\n            value={(step.type as MarketStep).quantity}\n            className=\"text-sm w-1/4 ml-2 border border-gray-200 focus:outline-none focus:border-blue-300\"\n            onChange={(e) => editSubAction(e.target.value)}\n         />\n         <span className=\"text-xs ml-0.5\">(-1 = max)</span>\n      </React.Fragment>\n   );\n\n   const sellComp = () => (\n      <React.Fragment>\n         <select\n            name={`buy-${step.id}`}\n            id={`buy-${step.id}`}\n            className=\"text-sm ml-1 bg-gray-100 border-b border-yellow-500 appearance-none cursor-pointer\"\n            value={(step.type as MarketStep).good}\n            onChange={(e) => editSubAction(e.target.value)}\n         >\n            {Object.values(CargoType).map((type) => (\n               <option value={type} key={`${step.id}-sell-${type}`}>{ formatString(type) }</option>\n            ))}\n         </select>\n         <input\n            type=\"number\"\n            min={-1}\n            value={(step.type as MarketStep).quantity}\n            className=\"text-sm w-1/4 ml-2 border border-gray-200 focus:outline-none focus:border-blue-300\"\n            onChange={(e) => editSubAction(e.target.value)}\n         />\n         <span className=\"text-xs ml-0.5\">(-1 = max)</span>\n      </React.Fragment>\n   );\n\n   const getSubAction = (action: number): JSX.Element => {\n      switch (action) {\n         case AutoAction.Travel:\n            return travelComp();\n         case AutoAction.Buy:\n            return buyComp();\n         case AutoAction.Sell:\n            return sellComp();\n         default:\n            return <div />;\n      }\n   };\n\n   return (\n      <div className=\"flex justify-between items-center w-full h-12 my-1 py-1 px-2 border border-gray-400 rounded-sm text-gray-500 hover:border-blue-300\">\n         <div className=\"flex flex-col w-4\">\n            { index !== 0\n               && (\n                  <button type=\"button\" className=\"mb-1 w-4 h-4 hover:text-black\" onClick={moveStepUp}>\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 15l7-7 7 7\" />\n                     </svg>\n                  </button>\n               )}\n            { index !== length - 1\n               && (\n                  <button type=\"button\" className=\"w-4 h-4 hover:text-black\" onClick={moveStepDown}>\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                     </svg>\n                  </button>\n               )}\n         </div>\n         <div className=\"flex items-center w-full px-2 text-left\">\n            <select\n               name={`stepType-${step.id}`}\n               id={`stepType-${step.id}`}\n               className=\"text-sm mr-2 bg-gray-100 border-b border-yellow-500 appearance-none cursor-pointer\"\n               value={step.type.action}\n               onChange={(e) => editAction(e.target.value)}\n            >\n               <option value=\"0\">Travel</option>\n               <option value=\"1\">Buy</option>\n               <option value=\"2\">Sell</option>\n            </select>\n            { getSubAction(step.type.action) }\n         </div>\n         <button type=\"button\" className=\"text-red-400 hover:text-white hover:bg-red-400 rounded-full\" onClick={deleteStep}>\n            <div className=\"w-5 h-5\">\n               <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.4} d=\"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\n               </svg>\n            </div>\n         </button>\n      </div>\n   );\n};\n\nexport default StepButton;\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Api from '../../Api';\nimport { OwnedShip, Location } from '../../Api/types';\nimport {\n   addAutomation, RootState, setAutomationState,\n} from '../../store';\nimport { AutoStepLoader } from '../SkeletonLoaders';\nimport { AutoAction, Step, Steps } from './Models';\nimport StepButton from './StepButton';\n\ninterface Props {\n   handleClose: () => void,\n   show: boolean,\n   ship: OwnedShip,\n}\n\nconst AutomateModal = ({ handleClose, show, ship }: Props) => {\n   const { token } = useSelector((state:RootState) => state.account);\n   const automations = useSelector((state:RootState) => state.automations.find((x) => x.shipId === ship.id));\n   const dispatch = useDispatch();\n   const [autoSteps, setAutoSteps] = useState<Steps>({\n      shipId: ship.id, steps: [], enabled: false, error: null,\n   });\n   const [system, setSystem] = useState<Location[]>([]);\n   const showHideModal = show ? 'fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900' : 'hidden';\n\n   useEffect(() => {\n      const getLocations = async () => {\n         const loc = (await Api.getLocations(token, 'OE')).locations;\n         setSystem(loc);\n\n         if (automations) {\n            setAutoSteps(automations);\n         }\n      };\n      getLocations();\n   }, []);\n\n   const makeId = () => {\n      let id = '';\n      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n      for (let i = 0; i < 24; i += 1) {\n         id += chars.charAt(Math.floor(Math.random() * 62));\n      }\n      return id;\n   };\n\n   const addNewStep = () => {\n      const newStep: Step = {\n         type: {\n            action: AutoAction.Travel,\n            destination: system[0].symbol,\n         },\n         id: makeId(),\n      };\n\n      setAutoSteps({ ...autoSteps, steps: [...autoSteps.steps, newStep] });\n   };\n\n   const deleteStep = (id: string) => {\n      setAutoSteps({ ...autoSteps, steps: autoSteps.steps.filter((x) => x.id !== id) });\n   };\n\n   const moveStepUp = (index: number) => {\n      const tempArray = [...autoSteps.steps];\n      const element = tempArray[index];\n      tempArray.splice(index, 1);\n      tempArray.splice(index - 1, 0, element);\n      setAutoSteps({ ...autoSteps, steps: tempArray });\n   };\n\n   const moveStepDown = (index: number) => {\n      const tempArray = [...autoSteps.steps];\n      const element = tempArray[index];\n      tempArray.splice(index, 1);\n      tempArray.splice(index + 1, 0, element);\n      setAutoSteps({ ...autoSteps, steps: tempArray });\n   };\n\n   const editStep = (value: Step) => {\n      const updated = autoSteps.steps.map((step) => (step.id === value.id ? { ...step, type: value.type } : step));\n      setAutoSteps({ ...autoSteps, steps: updated });\n   };\n\n   const runAuto = () => {\n      dispatch(addAutomation(autoSteps));\n      dispatch(setAutomationState({ shipId: ship.id, enabled: true }));\n      handleClose();\n   };\n\n   const stopAuto = () => {\n      dispatch(setAutomationState({ shipId: ship.id, enabled: false }));\n      handleClose();\n   };\n\n   return (\n      <div className={showHideModal}>\n         <div className=\"modal-overlay absolute w-full h-full bg-gray-900 opacity-50\" onClick={() => { handleClose(); }} />\n         <div className=\"modal-container flex flex-col bg-gray-100 w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto min-h-1/3\">\n            <div className=\"modal-content py-4 text-left px-6\">\n               <h3 className=\"text-xl font-semibold\">Automate</h3>\n               <p className=\"text-sm mt-2 mb-1\">Steps will begin at ship&apos;s current location</p>\n               <p className=\"text-sm\">Browser tab must be kept open for automation to run.</p>\n            </div>\n            { automations?.error\n            && (\n               <div className=\"px-6 mb-4\">\n                  <p className=\"bg-red-300 text-red-800 py-3 px-4\">{ automations.error }</p>\n               </div>\n            )}\n            <div className=\"flex flex-grow p-4 pt-0\">\n               <div className=\"w-full border border-gray-300 p-2\">\n                  { autoSteps.steps.map((step, index) => (\n                     <StepButton key={step.id} step={step} index={index} length={autoSteps.steps.length} system={system} editStep={editStep} deleteStep={() => deleteStep(step.id)} moveStepUp={() => moveStepUp(index)} moveStepDown={() => moveStepDown(index)} />\n                  ))}\n                  {system[0]\n                     ? (\n                        <button\n                           type=\"button\"\n                           className=\"flex justify-center items-center w-full py-2 bg-gray-300 border border-gray-400 rounded-sm text-gray-500 cursor-pointer hover:bg-gray-400 hover:text-gray-600\"\n                           onClick={() => addNewStep()}\n                        >\n                           <div className=\"w-6 h-6\">\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.4} d=\"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                              </svg>\n                           </div>\n                        </button>\n                     )\n                     : <AutoStepLoader />}\n               </div>\n            </div>\n            <div className=\"text-center\">\n               <button type=\"button\" className=\"mb-1 text-red-500 hover:text-red-600\" onClick={() => { handleClose(); }}>Close</button>\n               { autoSteps.enabled\n                  ? (\n                     <button\n                        type=\"button\"\n                        className=\"mt-2 w-full px-3 py-2 bg-red-500 text-white hover:bg-red-600 disabled:opacity-50 disabled:bg-red-400 disabled:cursor-default\"\n                        disabled={autoSteps.steps.length === 0}\n                        onClick={stopAuto}\n                     >Stop\n                     </button>\n                  )\n                  : (\n                     <button\n                        type=\"button\"\n                        className=\"mt-2 w-full px-3 py-2 bg-green-500 text-white hover:bg-green-600 disabled:opacity-50 disabled:bg-green-400 disabled:cursor-default\"\n                        disabled={autoSteps.steps.length === 0}\n                        onClick={runAuto}\n                     >Run\n                     </button>\n                  )}\n            </div>\n         </div>\n      </div>\n   );\n};\n\nexport default AutomateModal;\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n   formatDistanceToNowStrict, getUnixTime, isFuture, isPast,\n} from 'date-fns';\nimport {\n   Cargo, CargoType, OwnedShip,\n} from '../../Api/types';\nimport { addAutomationError, removeFlightPlan, RootState } from '../../store';\nimport Buy from '../Markets/Buy';\nimport Sell from '../Markets/Sell';\nimport Travel from './Travel';\nimport TravelProgressBar from './TravelProgress';\nimport AutomateModal from '../Automation/AutomateModal';\n\ninterface Props {\n   ship: OwnedShip,\n   time?: number,\n   compact?: boolean,\n}\n\nconst ShipCard = ({ ship, time, compact }:Props) => {\n   const flightPlan = useSelector((state:RootState) => state.flightPlans.find((x) => x.ship === ship.id));\n   const automation = useSelector((state:RootState) => state.automations.find((x) => x.shipId === ship.id));\n   const dispatch = useDispatch();\n   const [showBuyModal, setBuyModalShow] = useState(false);\n   const [showSellModal, setSellModalShow] = useState(false);\n   const [showTravelModal, setTravelModalShow] = useState(false);\n   const [showAutomateModal, setAutomateModalShow] = useState(false);\n   const [remainingTime, setRemainingTime] = useState<string>();\n\n   useEffect(() => {\n      if (!flightPlan) { return; }\n\n      if (isPast(new Date(flightPlan.arrivesAt))) {\n         dispatch(removeFlightPlan(flightPlan));\n      }\n\n      setRemainingTime(formatDistanceToNowStrict(new Date(flightPlan.arrivesAt)));\n   }, [time]);\n\n   const fuelIsEmpty = (cargo:Cargo[]) => {\n      const fuel = cargo.filter((x) => x.good === CargoType.Fuel).reduce((acc, item) => acc + item.quantity, 0);\n      return !(fuel > 0);\n   };\n\n   const formatString = (value:string) => (\n      value.toLowerCase().split('_').map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(' '));\n\n   const calcProgress = ():number => {\n      if (!flightPlan) { return 0; }\n\n      return (((Date.now() / 1000) - (getUnixTime(new Date(flightPlan.arrivesAt)) - flightPlan.timeRemainingInSeconds)) / flightPlan.timeRemainingInSeconds) * 100;\n   };\n\n   const closeModal = () => {\n      setAutomateModalShow(false);\n      if (automation?.error) {\n         dispatch(addAutomationError({ shipId: ship.id, error: null }));\n      }\n   };\n\n   const shipActions = () => {\n      if ((flightPlan && isFuture(new Date(flightPlan.arrivesAt))) || !ship.location) {\n         return null;\n      }\n\n      return (\n         <div className=\"mt-5 grid grid-cols-4 gap-x-4\">\n            <button\n               type=\"button\"\n               className=\"px-2 py-1 bg-blue-500 rounded hover:bg-blue-600 disabled:opacity-50 disabled:bg-blue-500 disabled:cursor-default\"\n               onClick={() => setTravelModalShow(true)}\n               disabled={fuelIsEmpty(ship.cargo)}\n            >{ fuelIsEmpty(ship.cargo) ? 'No fuel' : 'Travel' }\n            </button>\n            <button type=\"button\" className=\"px-2 py-1 bg-green-500 rounded hover:bg-green-600\" onClick={() => setBuyModalShow(true)}>Buy</button>\n            <button type=\"button\" className=\"px-2 py-1 bg-red-500 rounded hover:bg-red-600\" onClick={() => setSellModalShow(true)}>Sell</button>\n            <button type=\"button\" className=\"text-xs px-2 py-1 bg-purple-500 rounded hover:bg-purple-600\" onClick={() => setAutomateModalShow(true)}>Automate</button>\n         </div>\n      );\n   };\n\n   return (\n      <React.Fragment>\n         { showBuyModal ? <Buy show={showBuyModal} ship={ship} handleClose={() => setBuyModalShow(false)} /> : null }\n         { showSellModal ? <Sell show={showSellModal} ship={ship} handleClose={() => setSellModalShow(false)} /> : null }\n         { showTravelModal ? <Travel show={showTravelModal} ship={ship} handleClose={() => setTravelModalShow(false)} /> : null }\n         { showAutomateModal ? <AutomateModal show={showAutomateModal} ship={ship} handleClose={() => closeModal()} /> : null }\n         { compact ? (\n            <div className=\"w-1/4 p-3 bg-gray-900 border border-gray-700 rounded divide-y divide-gray-500 hover:border-yellow-900 hover:shadow-xl\">\n               <div className=\"flex justify-between items-center \">\n                  <div className=\"text-left\">\n                     <h3>{ ship.type }</h3>\n                     <p className=\"text-xs text-gray-400\">{ ship.location ?? 'In transit' }</p>\n                  </div>\n                  { (flightPlan && isFuture(new Date(flightPlan.arrivesAt))) || !ship.location\n                     ? (\n                        <div className=\"text-right\">\n                           <p className=\"text-xs text-gray-400\">In Transit</p>\n                           <p className=\"text-xs text-gray-300\">{ remainingTime ? `Arrives in ${remainingTime}` : 'ETA Unknown' }</p>\n                        </div>\n                     ) : (\n                        <div>\n                           { automation?.enabled\n                              ? <p className=\"text-sm\">Automating</p>\n                              : (\n                                 <React.Fragment>\n                                    <button type=\"button\" title=\"Travel\" className=\"mr-2 w-6 h-6 bg-blue-500 rounded hover:bg-blue-600 disabled:opacity-50 disabled:bg-blue-500 disabled:cursor-default\" onClick={() => setTravelModalShow(true)} disabled={fuelIsEmpty(ship.cargo)}>\n                                       <p className=\"text-sm font-bold\">T</p>\n                                    </button>\n                                    <button type=\"button\" title=\"Buy\" className=\"mr-2 w-6 h-6 bg-green-500 rounded hover:bg-green-600\" onClick={() => setBuyModalShow(true)}>\n                                       <p className=\"text-sm font-bold\">B</p>\n                                    </button>\n                                    <button type=\"button\" title=\"Sell\" className=\"mr-2 w-6 h-6 bg-red-500 rounded hover:bg-red-600\" onClick={() => setSellModalShow(true)}>\n                                       <p className=\"text-sm font-bold\">S</p>\n                                    </button>\n                                 </React.Fragment>\n                              )}\n                        </div>\n                     )}\n               </div>\n               { (flightPlan && isFuture(new Date(flightPlan.arrivesAt))) || !ship.location\n                  ? <div className=\"mt-2\"><TravelProgressBar completed={calcProgress()} /></div> : null}\n            </div>\n         ) : (\n            <div className=\"p-3 focus:outline-none bg-gray-900 border border-gray-700 rounded\">\n               <div className=\"flex justify-between items-center mb-3 pb-2 border-b border-gray-600\">\n                  <div>\n                     <h3 className=\"text-xl\">{ ship.type }</h3>\n                     <p className=\"text-xs text-gray-400\">{ ship.manufacturer }</p>\n                  </div>\n                  <div className=\"flex flex-col\">\n                     <div className=\"grid grid-cols-3 gap-2 mt-1\">\n                        <div className=\"flex items-center\">\n                           <div className=\"w-5 h-5 mr-1\">\n                              <svg fill=\"#E5E7EB\" enableBackground=\"new 0 0 512 512\" viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m512 358.121c0-68.38-26.629-132.667-74.98-181.02-48.353-48.352-112.64-74.98-181.02-74.98s-132.667 26.629-181.02 74.98c-48.351 48.353-74.98 112.64-74.98 181.02v15h205.016c4.085 12.323 12.371 22.642 23.657 29.305 8.558 5.052 17.953 7.453 27.236 7.453 18.406 0 36.36-9.448 46.376-26.413 1.956-3.313 3.522-6.781 4.717-10.345h204.998zm-235.548 10.093c-6.656 11.276-21.247 15.037-32.526 8.378-5.463-3.225-9.343-8.384-10.925-14.528-1.583-6.144-.679-12.535 2.547-17.998s8.385-9.343 14.528-10.925c1.976-.509 3.977-.76 5.964-.76 4.194 0 8.328 1.12 12.034 3.308 5.463 3.225 9.343 8.384 10.925 14.528 1.583 6.143.679 12.535-2.547 17.997zm31.689-25.093c-.032-.129-.057-.259-.09-.388-2.296-8.916-6.74-16.908-12.887-23.425l43.106-73.015-25.834-15.252-43.106 73.015c-8.675-2.233-17.819-2.264-26.737.032-13.903 3.581-25.58 12.362-32.879 24.726-2.674 4.53-4.636 9.344-5.882 14.307h-173.34c1.992-30.247 9.976-58.88 22.75-84.742l33.311 19.232 15-25.98-33.274-19.21c16.444-24.477 37.541-45.578 62.018-62.022l19.212 33.276 25.98-15-19.236-33.318c25.861-12.774 54.5-20.737 84.746-22.729v38.493h30v-38.493c30.246 1.992 58.885 9.955 84.746 22.729l-19.236 33.318 25.98 15 19.212-33.276c24.477 16.444 45.573 37.545 62.018 62.022l-33.274 19.21 15 25.98 33.311-19.232c12.774 25.862 20.758 54.495 22.75 84.742z\" /></svg>\n                           </div>\n                           <p>{ ship.speed }</p>\n                        </div>\n                        <div className=\"flex items-center\">\n                           <div className=\"w-4 h-4 mr-1\">\n                              <svg fill=\"#E5E7EB\" enableBackground=\"new 0 0 510.192 510.192\" viewBox=\"0 0 510.192 510.192\" xmlns=\"http://www.w3.org/2000/svg\"><g><path d=\"m510.192 0-122.656 13.628-300.462 300.463-22.694-22.694 33.301-33.3-21.213-21.213-54.514 54.513c10.689 10.689 55.253 55.254 65.86 65.861l-87.814 87.814 65.12 65.12 87.813-87.814c10.633 10.632 55.212 55.211 65.861 65.86l54.513-54.514-21.213-21.213-33.3 33.301-22.694-22.693 300.464-300.463zm-467.766 445.072 22.693-22.694 22.695 22.695-22.694 22.693zm66.602-21.212-22.695-22.695 22.694-22.693 22.694 22.694zm358.881-314.976-293.022 293.022-22.693-22.694 252.835-252.835-21.213-21.213-252.835 252.835-22.694-22.693 293.021-293.023 74.927-8.325z\" /></g></svg>\n                           </div>\n                           <p>{ ship.weapons }</p>\n                        </div>\n                        <div className=\"flex items-center\">\n                           <div className=\"w-4 h-4 mr-1\">\n                              <svg fill=\"#E5E7EB\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                                 <g>\n                                    <path d=\"M461.144,60.883L260.312,0.633c-2.809-0.844-5.808-0.844-8.62,0L50.858,60.883c-6.345,1.903-10.69,7.743-10.69,14.367\n                                       v220.916c0,28.734,11.632,58.148,34.573,87.425c17.522,22.36,41.762,44.813,72.048,66.736\n                                       c50.877,36.828,100.975,59.42,103.083,60.363c1.95,0.873,4.039,1.31,6.129,1.31c2.089,0,4.179-0.436,6.129-1.31\n                                       c2.108-0.943,52.205-23.535,103.082-60.363c30.285-21.923,54.525-44.376,72.047-66.736c22.941-29.276,34.573-58.69,34.573-87.425\n                                       V75.25C471.833,68.626,467.489,62.786,461.144,60.883z M441.833,296.166c0,50.852-51.023,98.534-93.826,129.581\n                                       c-38.374,27.833-77.291,47.583-92.005,54.678c-14.714-7.095-53.632-26.845-92.006-54.678\n                                       c-42.804-31.047-93.828-78.729-93.828-129.581V86.41l185.833-55.75l185.832,55.75V296.166z\"\n                                    />\n                                 </g>\n                              </svg>\n                           </div>\n                           <p>{ ship.plating }</p>\n                        </div>\n                     </div>\n                  </div>\n               </div>\n               <div className=\"flex items-center mt-4 mb-3\">\n                  <div className=\"w-6 h-6 mr-1\">\n                     <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.3} d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.3} d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\n                     </svg>\n                  </div>\n                  {(flightPlan && isFuture(new Date(flightPlan.arrivesAt))) || !ship.location\n                     ? (\n                        <p>In Transit <span className=\"text-sm text-gray-400\">({ remainingTime ? `Arrives in ${remainingTime}` : 'ETA Unknown' })</span></p>\n                     )\n                     : <p className=\"\">{ ship.location }</p>}\n               </div>\n               {((flightPlan && isFuture(new Date(flightPlan.arrivesAt))) || !ship.location)\n                  && (\n                     <div className=\"mb-3\">\n                        <div className=\"mt-2\"><TravelProgressBar completed={calcProgress()} /></div>\n                     </div>\n                  )}\n               <div>\n                  <p className=\"mb-2\">Cargo <span className=\"ml-2 text-sm text-gray-400\">{ ship.maxCargo - ship.spaceAvailable } of { ship.maxCargo }</span></p>\n                  <div className=\"pl-3\">\n                     { ship.cargo.slice().sort((a, b) => ((a.good > b.good) ? 1 : (b.good > a.good) ? -1 : 0)).map((cargo) => (\n                        <p className=\"text-sm py-0.5\" key={cargo.good + cargo.quantity + cargo.totalVolume + ship.id}>{ formatString(cargo.good) } ({ cargo.quantity } units)</p>\n                     ))}\n                  </div>\n               </div>\n               {automation?.enabled\n                  ? (\n                     <div className=\"flex items-center justify-end\">\n                        {automation.error\n                        && (\n                           <div className=\"w-6 h-6 mr-1 pt-0.5\" title=\"Automation error\">\n                              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"#EF4444\">\n                                 <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.8} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                              </svg>\n                           </div>\n                        )}\n                        <p className=\"text-xs\">Automating</p>\n                        <button type=\"button\" className=\"text-xs ml-2 px-2 py-1 bg-purple-500 rounded hover:bg-purple-600\" onClick={() => setAutomateModalShow(true)}>Tasks</button>\n                     </div>\n                  ) : shipActions()}\n            </div>\n         )}\n      </React.Fragment>\n   );\n};\n\nShipCard.defaultProps = {\n   compact: false,\n   time: Date.now(),\n};\n\nexport default ShipCard;\n","import { formatDistanceToNow } from 'date-fns';\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { RootState } from '../store';\nimport ShipCard from './Ships/ShipCard';\nimport { ProfileLoader } from './SkeletonLoaders';\n\nconst Profile = () => {\n   const { username, loans, ships } = useSelector((state:RootState) => state.user);\n   const [time, setTime] = useState<number>(Date.now());\n\n   useEffect(() => {\n      // Update the 'time' state, in order for ship cards to update (for keeping track of flight plan time)\n      const interval = setInterval(() => setTime(Date.now()), 1000);\n\n      return () => clearInterval(interval);\n   }, []);\n\n   return (\n      <React.Fragment>\n         {username === undefined\n            ? (\n               <React.Fragment>\n                  <ProfileLoader />\n               </React.Fragment>\n            )\n            : (\n               <React.Fragment>\n                  <p className=\"text-gray-400\">Welcome</p>\n                  <h2 className=\"text-3xl mb-10\">{ username }</h2>\n                  <div className=\"mb-4 min-h-1/4\">\n                     <h3 className=\"text-xl mb-4\">Loans</h3>\n                     <div className=\"pl-5\">\n                        { loans.length === 0\n                           ? (\n                              <div>\n                                 <p>You have no loans!</p>\n                                 <Link to=\"/loans/available\" className=\"text-sm text-yellow-700 hover:text-blue-600\">Get a loan</Link>\n                              </div>\n                           )\n                           : (\n                              <div>\n                                 { loans.map((loan) => (\n                                    <p key={loan.id}>{ loan.repaymentAmount.toLocaleString() } credits due { formatDistanceToNow(new Date(loan.due), { addSuffix: true }) }</p>\n                                 ))}\n                              </div>\n                           )}\n                     </div>\n                  </div>\n                  <div className=\"mb-4 min-h-1/4\">\n                     <h3 className=\"text-xl mb-4\">Ships</h3>\n                     <div className=\"pl-5\">\n                        { ships.length === 0\n                           ? (\n                              <div>\n                                 <p>You have no ships :(</p>\n                                 <Link to=\"/ships/available\" className=\"text-sm text-yellow-700 hover:text-blue-600\">Buy a ship</Link>\n                              </div>\n                           )\n                           : (\n                              ships.map((ship) => (\n                                 <ShipCard time={time} ship={ship} compact key={ship.class + ship.speed + ship.manufacturer + ship.maxCargo} />\n                              ))\n                           )}\n                     </div>\n                  </div>\n               </React.Fragment>\n            )}\n      </React.Fragment>\n   );\n};\n\nexport default Profile;\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport Api from '../../Api';\nimport { PurchaseLocation, Ship } from '../../Api/types';\nimport { RootState, setUser } from '../../store';\n\ninterface Props {\n   handleClose: () => void,\n   show: boolean,\n   ship: Ship | undefined\n}\n\nconst PurchaseShipModal = ({ handleClose, show, ship }:Props) => {\n   const { credits } = useSelector((state:RootState) => state.user);\n   const { username, token } = useSelector((state:RootState) => state.account);\n   const dispatch = useDispatch();\n   const history = useHistory();\n   const [loading, setLoading] = useState(false);\n\n   const showHideModal = show ? 'fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900' : 'hidden';\n\n   const purchaseShip = async (location:string) => {\n      if (!ship) { return; }\n\n      setLoading(true);\n      const result = await Api.buyShip(token, username, location, ship?.type);\n      dispatch(setUser(result));\n      handleClose;\n      history.push('/ships');\n   };\n\n   const renderButtons = (location: PurchaseLocation) => {\n      if (loading) {\n         return <div />;\n      }\n\n      if (credits > location.price) {\n         return <button type=\"button\" className=\"px-5 py-1 bg-green-500 rounded text-white hover:bg-green-400\" onClick={() => purchaseShip(location.location)}>Buy</button>;\n      }\n\n      return <span className=\"text-xs text-yellow-500\">Insufficient credits</span>;\n   };\n\n   return (\n      <div className={showHideModal}>\n         <div className=\"modal-overlay absolute w-full h-full bg-gray-900 opacity-50\" onClick={handleClose} />\n         <div className=\"modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto\">\n            <div className=\"modal-content py-4 text-left px-6\">\n               <h3 className=\"text-xl font-semibold mb-6\">Purchase { ship?.type }</h3>\n               <p className=\"text-sm mb-5\">This ship is available in { ship?.purchaseLocations.length } { ship?.purchaseLocations && ship.purchaseLocations.length > 1 ? 'locations' : 'location' }:</p>\n               <ul>\n                  {ship?.purchaseLocations.map((location) => (\n                     <li className=\"flex justify-between items-center my-3\">\n                        <span>{ location.location } for { location.price.toLocaleString() } credits </span>\n                        { renderButtons(location) }\n                     </li>\n                  ))}\n               </ul>\n               <div className=\"flex justify-end pt-2\">\n                  { !loading\n                     ? (<button type=\"button\" className=\"px-4 py-1 text-red-500 text-sm border border-red-500 rounded hover:text-red-400 hover:border-red-400\" onClick={handleClose}>Close</button>\n                     ) : <p className=\"text-sm text-yellow-500 italic\">Please Wait...</p>}\n               </div>\n            </div>\n         </div>\n      </div>\n   );\n};\n\nexport default PurchaseShipModal;\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport Api from '../../Api';\nimport { Ship } from '../../Api/types';\nimport { RootState } from '../../store';\nimport { CardLoader } from '../SkeletonLoaders';\nimport PurchaseShipModal from './PurchaseShipModal';\n\nconst Available = () => {\n   const user = useSelector((state:RootState) => state);\n   const [ships, setShips] = useState<Ship[]>();\n   const [sortOrder, setOrder] = useState(false);\n   const [sortType, setSortType] = useState('class');\n   const [showModal, setModalShow] = useState(false);\n   const [selectedShip, setSelectedShip] = useState<Ship>();\n\n   const GetShips = async () => {\n      const getShips = await Api.availableShips(user.account.token, user.user.username);\n      getShips.ships.sort((a, b) => ((a.type > b.type) ? 1 : (b.type > a.type) ? -1 : 0));\n      setShips(getShips.ships);\n   };\n\n   const lowestPrice = (ship: Ship) => (\n      ship.purchaseLocations.reduce((prev, curr) => (prev.price < curr.price ? prev : curr)).price\n   );\n\n   useEffect(() => {\n      const sort = (value:string) => {\n         if (!ships) {\n            return;\n         }\n\n         let sorted;\n\n         switch (value) {\n            case 'type':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.type < b.type) ? 1 : (b.type < a.type) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.type > b.type) ? 1 : (b.type > a.type) ? -1 : 0));\n               break;\n            case 'manufacturer':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.manufacturer > b.manufacturer) ? 1 : (b.manufacturer > a.manufacturer) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.manufacturer < b.manufacturer) ? 1 : (b.manufacturer < a.manufacturer) ? -1 : 0));\n               break;\n            case 'maxCargo':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.maxCargo > b.maxCargo) ? 1 : (b.maxCargo > a.maxCargo) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.maxCargo < b.maxCargo) ? 1 : (b.maxCargo < a.maxCargo) ? -1 : 0));\n               break;\n            case 'speed':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.speed > b.speed) ? 1 : (b.speed > a.speed) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.speed < b.speed) ? 1 : (b.speed < a.speed) ? -1 : 0));\n               break;\n            case 'plating':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.plating > b.plating) ? 1 : (b.plating > a.plating) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.plating < b.plating) ? 1 : (b.plating < a.plating) ? -1 : 0));\n               break;\n            case 'weapons':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.weapons > b.weapons) ? 1 : (b.weapons > a.weapons) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.weapons < b.weapons) ? 1 : (b.weapons < a.weapons) ? -1 : 0));\n               break;\n            default:\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.class > b.class) ? 1 : (b.class > a.class) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.class < b.class) ? 1 : (b.class < a.class) ? -1 : 0));\n               break;\n         }\n\n         setShips(sorted);\n      };\n\n      sort(sortType);\n   }, [sortType, sortOrder]);\n\n   useEffect(() => {\n      GetShips();\n   }, []);\n\n   return (\n      <React.Fragment>\n         <PurchaseShipModal show={showModal} ship={selectedShip} handleClose={() => setModalShow(false)} />\n         <h2 className=\"text-3xl mb-5\">Purchase Ships</h2>\n         <div className=\"flex mb-5\">\n            <button type=\"button\" className=\"cursor-pointer w-6 h-6\" onClick={() => setOrder(!sortOrder)}>\n               <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"#E5E7EB\" {...(sortOrder ? { transform: 'rotate(180) scale(-1,1)' } : {})} className=\"origin-center\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\" /><path d=\"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z\" /></svg>\n            </button>\n            <select name=\"sort\" id=\"sort\" className=\"appearance-none bg-gray-800 text-gray-200 cursor-pointer\" onChange={(e) => setSortType(e.target.value)}>\n               <option value=\"type\">Name</option>\n               <option value=\"manufacturer\">Manufacturer</option>\n               <option value=\"cost\">Cost</option>\n               <option value=\"maxCargo\">Max Cargo</option>\n               <option value=\"speed\">Speed</option>\n               <option value=\"plating\">Plating</option>\n               <option value=\"weapons\">Weapons</option>\n            </select>\n         </div>\n         <div className=\"grid grid-cols-4 gap-4\">\n            { !ships\n               && (\n                  <React.Fragment>\n                     <div className=\"p-3 bg-gray-900 border border-gray-700 rounded\">\n                        <CardLoader />\n                     </div>\n                     <div className=\"p-3 bg-gray-900 border border-gray-700 rounded\">\n                        <CardLoader />\n                     </div>\n                     <div className=\"p-3 bg-gray-900 border border-gray-700 rounded\">\n                        <CardLoader />\n                     </div>\n                  </React.Fragment>\n               )}\n            { ships?.map((ship) => (\n               <button type=\"button\" className=\"p-3 bg-gray-900 border border-gray-700 rounded hover:border-yellow-900 hover:shadow-xl\" key={ship.class + ship.speed + ship.manufacturer + ship.maxCargo} onClick={() => { setModalShow(true); setSelectedShip(ship); }}>\n                  <div className=\"flex justify-between items-center mb-5\">\n                     <div className=\"text-left\">\n                        <h3>{ ship.type }</h3>\n                        <p className=\"text-xs text-gray-400\">{ ship.manufacturer }</p>\n                     </div>\n                     <div className=\"text-right\">\n                        <p className=\"text-xs text-gray-400\">{ ship.purchaseLocations.length } available</p>\n                        <p className={`text-sm ${(lowestPrice(ship) > user.user.credits) ? 'text-red-400' : ''}`}>{ lowestPrice(ship).toLocaleString() } credits</p>\n                     </div>\n                  </div>\n                  <div className=\"flex mt-3\">\n                     <div className=\"w-6 h-6 mr-3\">\n                        <svg version=\"1.1\" fill=\"#E5E7EB\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 485.32 485.32\" enableBackground=\"new 0 0 485.32 485.32\">\n                           <g>\n                              <path d=\"m480.76,79.05c-0.6-0.2-235-78.3-235-78.3-2.1-1-4.1-1-6.2,0l-231.9,76.3c-5.8,2.4-7.2,7.4-7.2,10.3v313.3c0,5.2 3.1,9.3 7.2,10.3l229,73.2c3.5,1.3 7.3,1.8 12.1,0l228.9-73.2c4.1-2.1 7.2-6.2 7.2-10.3v-313.3c5.68434e-14-3.1-1-6.2-4.1-8.3zm-238.1-56.7l198.9,63.9-75.1,24.1-196-64.5 72.2-23.5zm-10.3,438l-211.3-67v-291.4l211.3,67.6v290.8zm10.3-310.2l-198.9-62.8 93.7-30.6 195.3,64.5-90.1,28.9zm10.3,310.2v-291.6l105.1-33.3v32.3l20.6-8.8v-30l85.5-27v290.4h0.1l-211.3,68z\" />\n                           </g>\n                        </svg>\n                     </div>\n                     <p>{ ship.maxCargo }</p>\n                  </div>\n                  <div className=\"flex mt-3\">\n                     <div className=\"w-6 h-6 mr-3\">\n                        <svg fill=\"#E5E7EB\" enableBackground=\"new 0 0 512 512\" viewBox=\"0 0 512 512\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"m512 358.121c0-68.38-26.629-132.667-74.98-181.02-48.353-48.352-112.64-74.98-181.02-74.98s-132.667 26.629-181.02 74.98c-48.351 48.353-74.98 112.64-74.98 181.02v15h205.016c4.085 12.323 12.371 22.642 23.657 29.305 8.558 5.052 17.953 7.453 27.236 7.453 18.406 0 36.36-9.448 46.376-26.413 1.956-3.313 3.522-6.781 4.717-10.345h204.998zm-235.548 10.093c-6.656 11.276-21.247 15.037-32.526 8.378-5.463-3.225-9.343-8.384-10.925-14.528-1.583-6.144-.679-12.535 2.547-17.998s8.385-9.343 14.528-10.925c1.976-.509 3.977-.76 5.964-.76 4.194 0 8.328 1.12 12.034 3.308 5.463 3.225 9.343 8.384 10.925 14.528 1.583 6.143.679 12.535-2.547 17.997zm31.689-25.093c-.032-.129-.057-.259-.09-.388-2.296-8.916-6.74-16.908-12.887-23.425l43.106-73.015-25.834-15.252-43.106 73.015c-8.675-2.233-17.819-2.264-26.737.032-13.903 3.581-25.58 12.362-32.879 24.726-2.674 4.53-4.636 9.344-5.882 14.307h-173.34c1.992-30.247 9.976-58.88 22.75-84.742l33.311 19.232 15-25.98-33.274-19.21c16.444-24.477 37.541-45.578 62.018-62.022l19.212 33.276 25.98-15-19.236-33.318c25.861-12.774 54.5-20.737 84.746-22.729v38.493h30v-38.493c30.246 1.992 58.885 9.955 84.746 22.729l-19.236 33.318 25.98 15 19.212-33.276c24.477 16.444 45.573 37.545 62.018 62.022l-33.274 19.21 15 25.98 33.311-19.232c12.774 25.862 20.758 54.495 22.75 84.742z\" /></svg>\n                     </div>\n                     <p>{ ship.speed }</p>\n                  </div>\n                  <div className=\"flex mt-3\">\n                     <div className=\"w-6 h-6 mr-3\">\n                        <svg version=\"1.1\" fill=\"#E5E7EB\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" viewBox=\"0 0 512 512\">\n                           <g>\n                              <path d=\"M461.144,60.883L260.312,0.633c-2.809-0.844-5.808-0.844-8.62,0L50.858,60.883c-6.345,1.903-10.69,7.743-10.69,14.367\n                                 v220.916c0,28.734,11.632,58.148,34.573,87.425c17.522,22.36,41.762,44.813,72.048,66.736\n                                 c50.877,36.828,100.975,59.42,103.083,60.363c1.95,0.873,4.039,1.31,6.129,1.31c2.089,0,4.179-0.436,6.129-1.31\n                                 c2.108-0.943,52.205-23.535,103.082-60.363c30.285-21.923,54.525-44.376,72.047-66.736c22.941-29.276,34.573-58.69,34.573-87.425\n                                 V75.25C471.833,68.626,467.489,62.786,461.144,60.883z M441.833,296.166c0,50.852-51.023,98.534-93.826,129.581\n                                 c-38.374,27.833-77.291,47.583-92.005,54.678c-14.714-7.095-53.632-26.845-92.006-54.678\n                                 c-42.804-31.047-93.828-78.729-93.828-129.581V86.41l185.833-55.75l185.832,55.75V296.166z\"\n                              />\n                           </g>\n                        </svg>\n                     </div>\n                     <p>{ ship.plating }</p>\n                  </div>\n                  <div className=\"flex mt-3\">\n                     <div className=\"w-6 h-6 mr-3\">\n                        <svg fill=\"#E5E7EB\" enableBackground=\"new 0 0 510.192 510.192\" viewBox=\"0 0 510.192 510.192\" xmlns=\"http://www.w3.org/2000/svg\"><g><path d=\"m510.192 0-122.656 13.628-300.462 300.463-22.694-22.694 33.301-33.3-21.213-21.213-54.514 54.513c10.689 10.689 55.253 55.254 65.86 65.861l-87.814 87.814 65.12 65.12 87.813-87.814c10.633 10.632 55.212 55.211 65.861 65.86l54.513-54.514-21.213-21.213-33.3 33.301-22.694-22.693 300.464-300.463zm-467.766 445.072 22.693-22.694 22.695 22.695-22.694 22.693zm66.602-21.212-22.695-22.695 22.694-22.693 22.694 22.694zm358.881-314.976-293.022 293.022-22.693-22.694 252.835-252.835-21.213-21.213-252.835 252.835-22.694-22.693 293.021-293.023 74.927-8.325z\" /></g></svg>\n                     </div>\n                     <p>{ ship.weapons }</p>\n                  </div>\n               </button>\n            ))}\n         </div>\n      </React.Fragment>\n   );\n};\n\nexport default Available;\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { OwnedShip } from '../../Api/types';\nimport { RootState } from '../../store';\nimport ShipCard from './ShipCard';\n\nconst Owned = () => {\n   const { ships } = useSelector((state:RootState) => state.user);\n   const [sortedShips, setShips] = useState<OwnedShip[]>();\n   const [sortOrder, setOrder] = useState(false);\n   const [sortType, setSortType] = useState('class');\n   const [time, setTime] = useState<number>(Date.now());\n\n   useEffect(() => {\n      // Update the 'time' state, in order for ship cards to update (for keeping track of flight plan time)\n      const interval = setInterval(() => setTime(Date.now()), 1000);\n\n      return () => clearInterval(interval);\n   }, []);\n\n   useEffect(() => {\n      const sort = (value:string) => {\n         if (!ships) {\n            return;\n         }\n\n         let sorted;\n\n         switch (value) {\n            case 'type':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.type < b.type) ? 1 : (b.type < a.type) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.type > b.type) ? 1 : (b.type > a.type) ? -1 : 0));\n               break;\n            case 'manufacturer':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.manufacturer > b.manufacturer) ? 1 : (b.manufacturer > a.manufacturer) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.manufacturer < b.manufacturer) ? 1 : (b.manufacturer < a.manufacturer) ? -1 : 0));\n               break;\n            case 'maxCargo':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.maxCargo > b.maxCargo) ? 1 : (b.maxCargo > a.maxCargo) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.maxCargo < b.maxCargo) ? 1 : (b.maxCargo < a.maxCargo) ? -1 : 0));\n               break;\n            case 'speed':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.speed > b.speed) ? 1 : (b.speed > a.speed) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.speed < b.speed) ? 1 : (b.speed < a.speed) ? -1 : 0));\n               break;\n            case 'plating':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.plating > b.plating) ? 1 : (b.plating > a.plating) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.plating < b.plating) ? 1 : (b.plating < a.plating) ? -1 : 0));\n               break;\n            case 'weapons':\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.weapons > b.weapons) ? 1 : (b.weapons > a.weapons) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.weapons < b.weapons) ? 1 : (b.weapons < a.weapons) ? -1 : 0));\n               break;\n            default:\n               sortOrder ? sorted = [...ships].sort((a, b) => ((a.class > b.class) ? 1 : (b.class > a.class) ? -1 : 0)) : sorted = [...ships].sort((a, b) => ((a.class < b.class) ? 1 : (b.class < a.class) ? -1 : 0));\n               break;\n         }\n\n         setShips(sorted);\n      };\n\n      sort(sortType);\n   }, [sortType, sortOrder, ships]);\n\n   return (\n      <React.Fragment>\n         <h2 className=\"text-3xl mb-5\">Your Ships</h2>\n         <div className=\"flex mb-5\">\n            <button type=\"button\" className=\"cursor-pointer w-6 h-6\" onClick={() => setOrder(!sortOrder)}>\n               <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"#E5E7EB\" {... (sortOrder ? { transform: 'rotate(180) scale(-1,1)' } : {})} className=\"origin-center\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\" /><path d=\"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z\" /></svg>\n            </button>\n            <select name=\"sort\" id=\"sort\" className=\"appearance-none bg-gray-800 text-gray-200 cursor-pointer\" onChange={(e) => setSortType(e.target.value)}>\n               <option value=\"type\">Name</option>\n               <option value=\"manufacturer\">Manufacturer</option>\n               <option value=\"cost\">Cost</option>\n               <option value=\"maxCargo\">Max Cargo</option>\n               <option value=\"speed\">Speed</option>\n               <option value=\"plating\">Plating</option>\n               <option value=\"weapons\">Weapons</option>\n            </select>\n         </div>\n         <div className=\"grid grid-cols-4 gap-4\">\n            { sortedShips?.map((ship) => (\n               <ShipCard time={time} ship={ship} key={ship.class + ship.speed + ship.manufacturer + ship.maxCargo} />\n            ))}\n         </div>\n      </React.Fragment>\n   );\n};\n\nexport default Owned;\n","import React from 'react';\nimport { NavLink, Route, Switch } from 'react-router-dom';\nimport Available from './Available';\nimport Owned from './Owned';\n\nconst Ships = () => (\n   <div>\n      <div className=\"text-sm mb-5\">\n         <NavLink exact to=\"/ships\" className=\"mr-4 pb-1\" activeClassName=\"subMenuActive\">Owned</NavLink>\n         <NavLink exact to=\"/ships/available\" className=\"mr-4 pb-1\" activeClassName=\"subMenuActive\">Purchase</NavLink>\n      </div>\n      <Switch>\n         <Route exact path=\"/ships\" component={Owned} />\n         <Route path=\"/ships/available\" component={Available} />\n      </Switch>\n   </div>\n);\n\nexport default Ships;\n","import React from 'react';\nimport { Location, System } from '../../Api/types';\n\ninterface IMoon {\n   parent: number,\n   moon: Location\n}\n\ninterface Props {\n   system: System,\n   stars: Location[],\n   planets: Location[],\n   moons: IMoon[],\n   asteroids: Location[]\n}\n\nconst SystemInfo = ({\n   system, stars, planets, moons, asteroids,\n}: Props) => (\n   <React.Fragment>\n      <h2 className=\"text-3xl\">{ system.name }</h2>\n      <ul className=\"mt-3\">\n         {stars.map((star) => (\n            <React.Fragment key={star.symbol}>\n               <li className=\"py-2\">{ star.name } ({ star.symbol })</li>\n               <ul className=\"pl-7\">\n                  {planets.map((planet, index) => (\n                     <React.Fragment key={planet.symbol}>\n                        <li className=\"py-2\">{ planet.name } ({ planet.symbol })</li>\n                        <ul className=\"pl-7\">\n                           {moons.map((moon) => {\n                              if (moon.parent === index) { return (<li className=\"py-2\" key={moon.moon.symbol}>{ moon.moon.name } ({ moon.moon.symbol })</li>); } return <li key={moon.moon.symbol} />;\n                           })}\n                        </ul>\n                     </React.Fragment>\n                  ))}\n                  { asteroids.map((asteroid) => (\n                     <li className=\"py-2\" key={asteroid.symbol}>{ asteroid.name } ({ asteroid.symbol })</li>\n                  ))}\n               </ul>\n            </React.Fragment>\n         ))}\n      </ul>\n   </React.Fragment>\n);\n\nexport default SystemInfo;\n","import React, { useRef, useState } from 'react';\nimport { MeshProps, useLoader } from 'react-three-fiber';\nimport { Mesh, TextureLoader } from 'three';\n\nconst Sphere: React.FC<MeshProps> = (props) => {\n   const mesh = useRef<Mesh>();\n   const imageTexture = useLoader(TextureLoader, `${process.env.PUBLIC_URL}/images/asteroid.jpg`);\n\n   const [hovered, setHover] = useState(false);\n   const [active, setActive] = useState(false);\n\n   return (\n      <mesh\n         {...props}\n         ref={mesh}\n         scale={[1, 1, 1]}\n         onClick={(event) => setActive(!active)}\n         onPointerOver={(event) => setHover(true)}\n         onPointerOut={(event) => setHover(false)}\n      >\n         <dodecahedronGeometry args={[0.1, 0]} attach=\"geometry\" />\n         <meshStandardMaterial attach=\"material\" map={imageTexture} />\n      </mesh>\n   );\n};\n\nexport default Sphere;\n","import React, { useRef, useState } from 'react';\nimport { MeshProps, useFrame, useLoader } from 'react-three-fiber';\nimport { Mesh, TextureLoader } from 'three';\n\nconst Sphere: React.FC<MeshProps> = (props) => {\n   const mesh = useRef<Mesh>();\n   const imageTexture = useLoader(TextureLoader, `${process.env.PUBLIC_URL}/images/moon.jpg`);\n\n   const [hovered, setHover] = useState(false);\n   const [active, setActive] = useState(false);\n\n   // Rotate mesh every frame, this is outside of React without overhead\n   useFrame(() => {\n      if (mesh.current) mesh.current.rotation.y += 0.0005;\n   });\n\n   return (\n      <mesh\n         {...props}\n         ref={mesh}\n         scale={[1, 1, 1]}\n         onClick={(event) => setActive(!active)}\n         onPointerOver={(event) => setHover(true)}\n         onPointerOut={(event) => setHover(false)}\n      >\n         <sphereBufferGeometry args={[0.10, 15, 15]} attach=\"geometry\" />\n         <meshStandardMaterial attach=\"material\" map={imageTexture} />\n      </mesh>\n   );\n};\n\nexport default Sphere;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { MeshProps, useFrame, useLoader } from 'react-three-fiber';\nimport { Mesh, TextureLoader } from 'three';\n\nconst Sphere: React.FC<MeshProps> = (props) => {\n   const mesh = useRef<Mesh>();\n   const imageTexture = useLoader(TextureLoader, `${process.env.PUBLIC_URL}/images/planet.jpg`);\n   const [rotateSpeed, setrotateSpeed] = useState(0);\n\n   const [hovered, setHover] = useState(false);\n   const [active, setActive] = useState(false);\n\n   function randomRotation() {\n      return Math.floor(Math.random() * (360 - 0 + 1)) + 0;\n   }\n\n   useEffect(() => {\n      const direction = Math.random() < 0.5 ? -1 : 1;\n      setrotateSpeed((Math.random() * (0.01 - 0.001) + 0.001) * direction);\n   }, []);\n\n   // Rotate mesh every frame, this is outside of React without overhead\n   useFrame(() => {\n      if (mesh.current) mesh.current.rotation.y += rotateSpeed;\n   });\n\n   return (\n      <mesh\n         {...props}\n         ref={mesh}\n         scale={[1, 1, 1]}\n         rotation={[0, randomRotation(), 0]}\n         onClick={(event) => setActive(!active)}\n         onPointerOver={(event) => setHover(true)}\n         onPointerOut={(event) => setHover(false)}\n      >\n         <sphereBufferGeometry args={[0.3, 15, 15]} attach=\"geometry\" />\n         <meshStandardMaterial attach=\"material\" map={imageTexture} />\n      </mesh>\n   );\n};\n\nexport default Sphere;\n","import React, { useRef, useState } from 'react';\nimport { MeshProps, useFrame, useLoader } from 'react-three-fiber';\nimport { Color, Mesh, TextureLoader } from 'three';\n\nconst Sphere: React.FC<MeshProps> = (props) => {\n   const mesh = useRef<Mesh>();\n   const imageTexture = useLoader(TextureLoader, `${process.env.PUBLIC_URL}/images/sun.jpg`);\n\n   const [hovered, setHover] = useState(false);\n   const [active, setActive] = useState(false);\n\n   // Rotate mesh every frame, this is outside of React without overhead\n   useFrame(() => {\n      if (mesh.current) mesh.current.rotation.y += 0.0005;\n   });\n\n   return (\n      <mesh\n         {...props}\n         ref={mesh}\n         scale={[1, 1, 1]}\n         onClick={(event) => setActive(!active)}\n         onPointerOver={(event) => setHover(true)}\n         onPointerOut={(event) => setHover(false)}\n      >\n         <pointLight intensity={2} position={[0, 0, 0]} />\n         <sphereBufferGeometry args={[1, 25, 25]} attach=\"geometry\" />\n         <meshStandardMaterial attach=\"material\" map={imageTexture} emissiveMap={imageTexture} emissive={new Color(0x30301b)} emissiveIntensity={2.6} />\n      </mesh>\n   );\n};\n\nexport default Sphere;\n","import React, { Suspense, useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { Canvas, useLoader } from 'react-three-fiber';\nimport { TextureLoader } from 'three';\nimport Api from '../../Api';\nimport { Location, LocationType, System } from '../../Api/types';\nimport { RootState } from '../../store';\nimport SystemInfo from './SystemInfo';\nimport Asteroid from './ThreeObjects/Asteroid';\nimport Moon from './ThreeObjects/Moon';\nimport Planet from './ThreeObjects/Planet';\nimport Sun from './ThreeObjects/Sun';\n\ninterface IMoon {\n   parent: number,\n   moon: Location\n}\n\nconst SystemMap = () => {\n   const bgImageTexture = useLoader(TextureLoader, `${process.env.PUBLIC_URL}/images/stars.jpg`);\n   const token = useSelector((state:RootState) => state.account.token);\n   const [system, setSystem] = useState<System>();\n   const [stars, setStars] = useState<Location[]>();\n   const [planets, setPlanets] = useState<Location[]>();\n   const [asteroids, setAsteroids] = useState<Location[]>();\n   const [moons, setMoons] = useState<IMoon[]>();\n\n   useEffect(() => {\n      const GetSystems = async () => {\n         const systems = (await Api.systemsInfo(token)).systems[0];\n         setSystem(systems);\n         setPlanets([...systems.locations].filter((location) => location.type === LocationType.Planet));\n         setStars([...systems.locations].filter((location) => location.type === LocationType.GasGiant));\n         setAsteroids([...systems.locations].filter((location) => location.type === LocationType.Asteroid));\n      };\n      GetSystems();\n   }, []);\n\n   useEffect(() => {\n      if (!system) { return; }\n\n      const tempMoons = [...system.locations].filter((location) => location.type === LocationType.Moon);\n      const moonArray:IMoon[] = [];\n      tempMoons.map((moon) => {\n         const parent = planets?.findIndex((x) => moon.symbol.startsWith(x.symbol)) as number;\n         moonArray.push({ parent, moon });\n         return true;\n      });\n      setMoons(moonArray);\n   }, [planets]);\n\n   const getMoonPosition = (moon:IMoon) => {\n      const temp = [...moons as IMoon[]].filter((x) => x.parent === moon.parent);\n      temp.findIndex((x) => x.moon.symbol === moon.moon.symbol);\n      return -1 - ((temp.findIndex((x) => x.moon.symbol === moon.moon.symbol)) * 0.5);\n   };\n\n   return (\n      <React.Fragment>\n         <div className=\"h-1/4\">\n            { system && stars && planets && moons && asteroids\n               && (\n                  <React.Fragment>\n                     <Canvas camera={{ position: [4.5, 0, 10], fov: 20 }} onCreated={(state) => { state.scene.background = bgImageTexture; state.camera.lookAt(4.5, 0, 0); }}>\n                        <ambientLight intensity={0.4} />\n                        {stars?.map((star) => (\n                           <Suspense key={star.symbol} fallback={<sphereBufferGeometry args={[2, 15, 15]} attach=\"geometry\" />}><Sun position={[0, 0, 0]} /></Suspense>\n                        ))}\n                        {planets?.map((planet, index) => (\n                           <Suspense key={planet.symbol} fallback={<sphereBufferGeometry args={[2, 15, 15]} attach=\"geometry\" />}><Planet position={[(index + 3) + index, 0, 0]} /></Suspense>\n                        ))}\n                        {asteroids?.map((asteroid) => (\n                           <Suspense key={asteroid.symbol} fallback={<sphereBufferGeometry args={[2, 15, 15]} attach=\"geometry\" />}><Asteroid position={[planets ? planets.length + 7 : 0, 0, 0]} /></Suspense>\n                        ))}\n                        {moons?.map((moon) => (\n                           <Suspense key={moon.moon.symbol} fallback={<sphereBufferGeometry args={[2, 15, 15]} attach=\"geometry\" />}><Moon position={[(moon.parent + 3) + moon.parent, getMoonPosition(moon), 0]} /></Suspense>\n                        ))}\n                     </Canvas>\n                     <div className=\"mt-4\">\n                        <SystemInfo system={system} stars={stars} planets={planets} moons={moons} asteroids={asteroids} />\n                     </div>\n                  </React.Fragment>\n               )}\n         </div>\n      </React.Fragment>\n   );\n};\n\nexport default SystemMap;\n","/* eslint-disable jsx-a11y/no-static-element-interactions */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport Api from '../../Api';\nimport { Loan, LoanType } from '../../Api/types';\nimport { RootState, setUser } from '../../store';\n\ninterface Props {\n   handleClose: () => void,\n   show: boolean,\n   loan: Loan | undefined\n}\n\nconst GetLoan = ({ handleClose, show, loan }:Props) => {\n   const history = useHistory();\n   const dispatch = useDispatch();\n   const user = useSelector((state:RootState) => state.account);\n   const [loading, setLoading] = useState(false);\n   const [error, setError] = useState<string>('');\n   const showHideModal = show ? 'fixed w-full h-full top-0 left-0 flex items-center justify-center text-gray-900' : 'hidden';\n\n   useEffect(() => {\n      setLoading(false);\n      setError('');\n   }, [loan]);\n\n   const requestLoan = async () => {\n      setLoading(true);\n      try {\n         const result = await Api.newLoan(user.username, user.token, LoanType.Startup);\n         dispatch(setUser(result));\n         handleClose;\n         history.push('/loans');\n      } catch (err: unknown) {\n         setLoading(false);\n         setError((err as Error).message);\n      }\n   };\n\n   return (\n      <div className={showHideModal}>\n         <div className=\"modal-overlay absolute w-full h-full bg-gray-900 opacity-50\" onClick={handleClose} />\n         <div className=\"modal-container bg-white w-11/12 md:max-w-md mx-auto rounded shadow-lg z-50 overflow-y-auto\">\n            <div className=\"modal-content py-4 text-left px-6\">\n               <h3 className=\"text-xl font-semibold mb-6\">Request the following loan</h3>\n               <div className=\"mb-4\">\n                  <p className=\"text-sm text-gray-500\">Loan amount</p>\n                  <p>{ loan?.amount.toLocaleString() } credits</p>\n               </div>\n               <div className=\"mb-4\">\n                  <p className=\"text-sm text-gray-500\">Repayment Due</p>\n                  <p>{ loan?.termInDays } day{ loan && loan?.termInDays > 1 ? 's' : '' }</p>\n               </div>\n               <div className=\"mb-4\">\n                  <p className=\"text-sm text-gray-500\">Repayment Amount</p>\n                  <p>\n                     { loan && (loan.amount + (loan.amount * (loan.rate / 100))).toLocaleString() }\n                     {' '} credits\n                  </p>\n               </div>\n               { error\n                  && (\n                     <div className=\"bg-red-300 text-red-800 px-4 py-3 mb-4 text-center\">\n                        <p>{ error }</p>\n                     </div>\n                  )}\n               <div className=\"flex justify-end pt-2\">\n                  { !loading\n                     ? (\n                        <React.Fragment>\n                           <button type=\"button\" className=\"px-4 py-2 text-red-500 text-sm rounded mr-4 hover:text-red-400\" onClick={handleClose}>Close</button>\n                           <button\n                              type=\"button\"\n                              className=\"w-1/4 px-4 py-2 text-white text-sm bg-green-500 rounded hover:bg-green-400 disabled:opacity-50 disabled:cursor-default disabled:bg-green-500\"\n                              disabled={loading || (error.length > 0)}\n                              onClick={requestLoan}\n                           >Get Loan\n                           </button>\n                        </React.Fragment>\n                     )\n                     : <p className=\"text-sm text-yellow-500 italic\">Please Wait...</p>}\n               </div>\n            </div>\n         </div>\n      </div>\n   );\n};\n\nexport default GetLoan;\n","import React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport Api from '../../Api';\nimport { Loan } from '../../Api/types';\nimport { RootState } from '../../store';\nimport { CardLoader } from '../SkeletonLoaders';\nimport GetLoan from './GetLoadModal';\n\nconst Available = () => {\n   const user = useSelector((state:RootState) => state.account);\n   const [loans, setLoans] = useState<Loan[]>();\n   const [showModal, setModalShow] = useState(false);\n   const [selectedLoan, setSelectedLoan] = useState<Loan>();\n\n   useEffect(() => {\n      const GetLoans = async () => {\n         setLoans((await Api.getLoansAvailable(user.token)).loans);\n      };\n      GetLoans();\n   }, []);\n\n   return (\n      <React.Fragment>\n         <GetLoan show={showModal} loan={selectedLoan} handleClose={() => { setModalShow(false); setSelectedLoan(undefined); }} />\n         <h2 className=\"text-3xl mb-5\">Available Loans</h2>\n         <div className=\"grid grid-cols-4 gap-4\">\n            { !loans\n               && (\n                  <React.Fragment>\n                     <div className=\"p-3 bg-gray-900 border border-gray-700 rounded\">\n                        <CardLoader />\n                     </div>\n                     <div className=\"p-3 bg-gray-900 border border-gray-700 rounded\">\n                        <CardLoader />\n                     </div>\n                     <div className=\"p-3 bg-gray-900 border border-gray-700 rounded\">\n                        <CardLoader />\n                     </div>\n                  </React.Fragment>\n               )}\n            { loans?.map((loan) => (\n               <button type=\"button\" className=\"p-3 bg-gray-900 border border-gray-700 rounded text-left hover:border-yellow-900 hover:shadow-xl\" key={loan.amount + loan.type + loan.rate} onClick={() => { setModalShow(true); setSelectedLoan(loan); }}>\n                  <div className=\"flex justify-between items-start\">\n                     <div className=\"flex items-center\">\n                        <div className=\"w-6 h-6 mr-2\">\n                           <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.1} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                           </svg>\n                        </div>\n                        <h3 className=\"text-lg\">{ loan.amount.toLocaleString() }</h3>\n                     </div>\n                     <div>\n                        { loan.collateralRequired\n                           && <p className=\"text-red-400\">Collateral Required</p> }\n                     </div>\n                  </div>\n                  <p className=\"text-xs text-gray-400\">{ loan.type }</p>\n                  <div className=\"mt-5\">\n                     <div className=\"flex mt-3\">\n                        <div className=\"w-6 h-6 mr-3\" title=\"Term\">\n                           <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                           </svg>\n                        </div>\n                        <p>{ loan.termInDays }</p>\n                     </div>\n                     <div className=\"flex mt-3\">\n                        <p className=\"text-xl text-center w-6 h-6 mr-3\" title=\"Origination fee\">%</p>\n                        <p>\n                           <span>{ loan.rate } </span>\n                           <span className=\"text-gray-400 text-sm\">\n                              (\n                              { loan.amount * (loan.rate / 100)}\n                              {' '}\n                              credits)\n                           </span>\n                        </p>\n                     </div>\n                     <p className=\"mt-3 pt-3 text-sm border-t border-gray-700\">\n                        Total repayment cost:\n                        {' '}\n                        { (loan.amount + (loan.amount * (loan.rate / 100))).toLocaleString() }\n                        {' '}\n                        credits\n                     </p>\n                  </div>\n               </button>\n            ))}\n         </div>\n      </React.Fragment>\n   );\n};\n\nexport default Available;\n","import { formatDistanceToNow } from 'date-fns';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { RootState } from '../../store';\n\nconst Owned = () => {\n   const { loans } = useSelector((state:RootState) => state.user);\n\n   return (\n      <React.Fragment>\n         <h2 className=\"text-3xl mb-5\">Your Loans</h2>\n         <div className=\"grid grid-cols-4 gap-4\">\n            { loans.map((loan) => (\n               <button type=\"button\" className=\"p-3 bg-gray-900 border border-gray-700 rounded text-left hover:border-yellow-900 hover:shadow-xl\" key={loan.id}>\n                  <div className=\"mb-3\">\n                     <p className=\"text-xs text-gray-400\">Repayment Amount</p>\n                     <p>{ loan.repaymentAmount.toLocaleString() } credits</p>\n                  </div>\n                  <div>\n                     <p className=\"text-xs text-gray-400\">Due in</p>\n                     <p>{ formatDistanceToNow(new Date(loan.due), { addSuffix: true }) }</p>\n                  </div>\n               </button>\n            ))}\n         </div>\n      </React.Fragment>\n   );\n};\n\nexport default Owned;\n","import React from 'react';\nimport { NavLink, Route, Switch } from 'react-router-dom';\nimport Available from './Available';\nimport Owned from './Owned';\n\nconst Loans = () => (\n   <div>\n      <div className=\"text-sm mb-5\">\n         <NavLink exact to=\"/loans\" className=\"mr-4 pb-1\" activeClassName=\"subMenuActive\">Your Loans</NavLink>\n         <NavLink exact to=\"/loans/available\" className=\"mr-4 pb-1\" activeClassName=\"subMenuActive\">Get a Loan</NavLink>\n      </div>\n      <Switch>\n         <Route exact path=\"/loans\" component={Owned} />\n         <Route path=\"/loans/available\" component={Available} />\n      </Switch>\n   </div>\n);\n\nexport default Loans;\n","import { formatDistanceToNow } from 'date-fns';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Api from '../../Api';\nimport { Location } from '../../Api/types';\nimport { RootState, updateMarketData } from '../../store';\n\nconst Markets = () => {\n   const { token } = useSelector((state:RootState) => state.account);\n   const { ships } = useSelector((state:RootState) => state.user);\n   const marketData = useSelector((state:RootState) => state.marketData);\n   const dispatch = useDispatch();\n   const [locations, setLocations] = useState<Location[]>();\n   const [time, setTime] = useState<number>(Date.now());\n\n   useEffect(() => {\n      const getData = async () => {\n         const system = (await Api.getLocations(token, 'OE')).locations;\n         setLocations(system);\n      };\n      getData();\n\n      // Update the 'time' state, to refresh \"last updated\" times\n      const interval = setInterval(() => setTime(Date.now()), 60000);\n\n      return () => clearInterval(interval);\n   }, []);\n\n   useEffect(() => {\n      const getMarketData = async () => {\n         locations?.forEach(async (location) => {\n            if (ships.some((x) => x.location === location.symbol)) {\n               const data = await Api.getMarket(token, location.symbol);\n               dispatch(updateMarketData({ updatedAt: Date.now(), planet: data.location }));\n            }\n         });\n      };\n      getMarketData();\n   }, [locations, ships]);\n\n   const getDataForLocation = (location: Location) => {\n      const data = marketData.find((x) => x.planet.symbol === location.symbol);\n\n      const formatString = (value:string) => (\n         value.toLowerCase().split('_').map((s) => s.charAt(0).toUpperCase() + s.slice(1)).join(' '));\n\n      if (!data || data?.planet.marketplace.length === 0) {\n         return <p className=\"mt-3 text-sm text-gray-400\">No data available</p>;\n      }\n\n      return (\n         data?.planet.marketplace.slice().sort((a, b) => ((a.symbol > b.symbol) ? 1 : (b.symbol > a.symbol) ? -1 : 0)).map((market) => (\n            <div className=\"text-sm my-3\" key={market.symbol + market.pricePerUnit + market.volumePerUnit}>\n               <p className=\"font-bold\">{ formatString(market.symbol) }</p>\n               <p className=\"pl-2\">Quantity: { market.quantityAvailable.toLocaleString() }</p>\n               <p className=\"pl-2\">Price per unit: { market.pricePerUnit.toLocaleString() } credits</p>\n            </div>\n         ))\n      );\n   };\n\n   const getUpdatedTime = (location: Location) => {\n      const data = marketData.find((x) => x.planet.symbol === location.symbol);\n\n      if (!data) { return null; }\n\n      return `Updated ${formatDistanceToNow(new Date(data.updatedAt), { addSuffix: true })}`;\n   };\n\n   return (\n      <React.Fragment>\n         <h2 className=\"text-3xl mb-5\">Markets</h2>\n         <div className=\"grid grid-cols-3 gap-4\">\n            { locations?.sort((a, b) => ((a.name > b.name) ? 1 : (b.name > a.name) ? -1 : 0)).map((location) => (\n               <div className=\"p-3 bg-gray-900 border border-gray-700 rounded\" key={location.symbol}>\n                  <div className=\"flex justify-between items-center pb-2 border-b border-gray-700\">\n                     <h3 className=\"text-xl\">{ location.name }</h3>\n                     <p className=\"text-xs text-gray-400\">{ time !== Date.now() && getUpdatedTime(location) }</p>\n                  </div>\n                  { getDataForLocation(location) }\n               </div>\n            ))}\n         </div>\n      </React.Fragment>\n   );\n};\n\nexport default Markets;\n","import React, { Suspense, useEffect, useState } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as Comlink from 'comlink';\nimport { Automation, WorkerType } from './webworker';\nimport {\n   addAutomationError,\n   addFlightPlan, removeFlightPlan, RootState, setAutomationState, setCredits, setToken, setUser, StoredMarket, updateMarketData, updateShip,\n} from './store';\nimport Api from './Api/index';\nimport './App.css';\nimport NavBar from './components/NavBar';\nimport SignIn from './components/SignIn';\nimport Profile from './components/Profile';\nimport Ships from './components/Ships/Ships';\nimport Systems from './components/Systems/Systems';\nimport Loans from './components/Loans/Loans';\nimport { FlightPlan, Market, OwnedShip, Purchase } from './Api/types';\nimport Markets from './components/Markets/Markets';\nimport { AutoAction } from './components/Automation/Models';\n\ninterface Props {\n   Worker: Comlink.Remote<WorkerType>\n}\n\ninterface Token {\n   username: string,\n   token: string\n}\n\nexport interface WorkerDataUpdate {\n   type: AutoAction.Travel | AutoAction.Buy | AutoAction.Sell,\n   data: FlightPlan | Purchase,\n}\n\nexport interface WorkerError {\n   shipId: string,\n   error: string | null,\n}\n\nfunction App({ Worker }:Props) {\n   const [automationsList, setAutomationsList] = useState<{ shipId:string, instance: Comlink.Remote<Automation>}[]>([]);\n   const { account, automations, user } = useSelector((state:RootState) => state);\n   const dispatch = useDispatch();\n   const key = localStorage.getItem('apiKey');\n\n   useEffect(() => {\n      if (key === undefined || key === null) { return; }\n\n      const apiKey = JSON.parse(key) as Token;\n\n      dispatch(setToken(apiKey));\n\n      const FetchAccount = async () => {\n         const result = await Api.getUser(apiKey.username, apiKey.token);\n         dispatch(setUser(result));\n      };\n\n      // Update flight paths stored in local storage\n      const flightPlansStore = localStorage.getItem('flightPlans');\n      const flightPlans = flightPlansStore !== null ? JSON.parse(flightPlansStore) as FlightPlan[] : null;\n      if (flightPlans && flightPlans.length > 0) {\n         flightPlans.map(async (plan) => {\n            const { flightPlan } = await Api.queryFlightPlan(apiKey.token, apiKey.username, plan.id);\n            if (flightPlan.terminatedAt === null) {\n               dispatch(addFlightPlan(flightPlan));\n            } else if (flightPlan.terminatedAt) {\n               // This will remove outdated flights from the local storage\n               dispatch(removeFlightPlan(flightPlan));\n            }\n         });\n      }\n\n      // Update market data stored in local storage\n      const marketDataStore = localStorage.getItem('marketData');\n      const marketData = marketDataStore !== null ? JSON.parse(marketDataStore) as StoredMarket[] : null;\n      marketData?.map((data) => (\n         dispatch(updateMarketData(data))\n      ));\n\n      FetchAccount();\n   }, []);\n\n   const webworkerError = (data:WorkerError) => {\n      console.log(data);\n      dispatch(setAutomationState({ shipId: data.shipId, enabled: false }));\n      dispatch(addAutomationError(data));\n   };\n\n   const webworkerUpdateState = async (data:WorkerDataUpdate) => {\n      if (data.type === AutoAction.Travel) {\n         dispatch(addFlightPlan(data.data as FlightPlan));\n         // ship fuel and cargo space change after flight plan, so update the ship\n         const updatedShip = await Api.shipInfo(account.token, account.username, (data.data as FlightPlan).ship);\n         dispatch(updateShip(updatedShip.ship));\n      } else {\n         dispatch(setCredits((data.data as Purchase).credits));\n         dispatch(updateShip((data.data as Purchase).ship));\n      }\n   };\n\n   const webworkerGetLocalStorage = (worker: Automation) => {\n      worker.setMarketData(localStorage.getItem('marketData'));\n   };\n\n   const webworkerUpdateMarketData = (data: Market) => {\n      dispatch(updateMarketData({ updatedAt: Date.now(), planet: data.location }));\n   };\n\n   useEffect(() => {\n      automations.forEach(async (item) => {\n         const automation = automationsList.find((x) => x.shipId === item.shipId);\n\n         // If the automation in the store is not enabled and there's no running automation, then we should create a new one and start it.\n         if (item.enabled && !automation) {\n            const ship = user.ships.find((x) => x.id === item.shipId) as OwnedShip;\n            const instance = await new Worker(account.token,\n               account.username, item, ship, user.credits,\n               Comlink.proxy(webworkerError),\n               Comlink.proxy(webworkerUpdateState),\n               Comlink.proxy(webworkerGetLocalStorage),\n               Comlink.proxy(webworkerUpdateMarketData));\n            await instance.run();\n            setAutomationsList([...automationsList, { shipId: item.shipId, instance }]);\n         }\n\n         // If the automation in the store is not enabled and there's an automation worker, we should stop it.\n         if (!item.enabled && automation) {\n            await automation.instance.stop();\n            setAutomationsList(automationsList.filter((x) => x.shipId !== automation.shipId));\n         }\n      });\n   }, [automations]);\n\n   return (\n      <React.Fragment>\n         { (key === undefined || key === null) ? <SignIn /> : (\n            <React.Fragment>\n               <NavBar />\n               <div className=\"bg-gray-800 py-4 flex-grow text-gray-200\">\n                  <div className=\"container min-h-full mx-auto\">\n                     { account.token.length !== 0\n                        && (\n                           <Switch>\n                              <Route exact path=\"/\" component={Profile} />\n                              <Route path=\"/ships\" component={Ships} />\n                              <Route path=\"/loans\" component={Loans} />\n                              <Route path=\"/markets\" component={Markets} />\n                              <Suspense fallback={<div />}>\n                                 <Route path=\"/systems\" component={Systems} />\n                              </Suspense>\n                           </Switch>\n                        )}\n                  </div>\n               </div>\n            </React.Fragment>\n         )}\n      </React.Fragment>\n   );\n}\n\nexport default App;\n","/* eslint-disable import/no-webpack-loader-syntax */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\nimport * as Comlink from 'comlink';\n/* eslint-disable-next-line import/no-unresolved */\nimport Worker from 'worker-loader!./webworker';\nimport { WorkerType } from './webworker';\nimport App from './App';\nimport store from './store';\n\nconst worker = Comlink.wrap<WorkerType>(new Worker());\n\nReactDOM.render(\n   <React.StrictMode>\n      <Provider store={store}>\n         <BrowserRouter basename=\"/Vocivos\">\n            <App Worker={worker} />\n         </BrowserRouter>\n      </Provider>\n   </React.StrictMode>,\n   document.getElementById('root'),\n);\n","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"static/js/webworker.4fa50a90.worker.js\");\n}\n"],"sourceRoot":""}